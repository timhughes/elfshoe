{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"elfshoe","text":"<p>Automated, validated, version-aware iPXE boot menu generation - where elves craft your network boot menus.</p>"},{"location":"#what-is-this","title":"What is this?","text":"<p>elfshoe transforms a simple YAML configuration file into production-ready iPXE boot menus. It automatically fetches the latest distribution versions, validates that boot files exist, and generates menus that just work.</p>"},{"location":"#why-does-this-exist","title":"Why does this exist?","text":"<p>Managing iPXE menus manually is painful:</p> <ul> <li>Version drift: Your menu says \"Fedora 39\" but Fedora 41 released months ago</li> <li>Broken URLs: That kernel you linked to? Moved or deleted, and you won't know until someone tries to boot</li> <li>Copy-paste errors: Adding a new distro means copying 20 lines and hoping you changed all the right fields</li> <li>Testing overhead: Manually checking each URL takes forever, so you skip it</li> </ul> <p>elfshoe solves this by making menu generation: - Automatic - Fetches latest versions from official metadata - Validated - Verifies every URL before adding to menu - Repeatable - Same config always produces working menus - Extensible - Plugin system for adding new distributions</p>"},{"location":"#who-is-this-for","title":"Who is this for?","text":""},{"location":"#homelab-enthusiasts","title":"Homelab enthusiasts","text":"<p>Run a single command and get an up-to-date boot menu with the latest distro versions. No more hunting for kernel URLs.</p>"},{"location":"#system-administrators","title":"System administrators","text":"<p>Generate consistent boot menus across environments. Configuration-as-code means you can version control, review changes, and automate deployments.</p>"},{"location":"#infrastructure-teams","title":"Infrastructure teams","text":"<p>Integrate into CI/CD pipelines. Test menu changes before deployment. Extend with custom distributions for your internal OS images.</p>"},{"location":"#what-makes-this-different","title":"What makes this different?","text":""},{"location":"#traditional-ipxe-menus","title":"Traditional iPXE menus","text":"<pre><code># Manually maintained, hope it works\n:fedora\nkernel http://download.fedoraproject.org/pub/fedora/linux/releases/39/Server/x86_64/os/images/pxeboot/vmlinuz\ninitrd http://download.fedoraproject.org/pub/fedora/linux/releases/39/Server/x86_64/os/images/pxeboot/initrd.img\nboot\n</code></pre> <p>Problems: - Version hardcoded (39 might be outdated) - No validation (URL might be broken) - No reusability (copy-paste for each distro)</p>"},{"location":"#with-elfshoe","title":"With elfshoe","text":"<pre><code>distributions:\n  fedora:\n    enabled: true\n    type: \"dynamic\"\n    metadata_provider: \"fedora\"\n    metadata_url: \"https://fedoraproject.org/releases.json\"\n    url_template: \"http://download.fedoraproject.org/.../releases/{version}/...\"\n    boot_files:\n      kernel: \"images/pxeboot/vmlinuz\"\n      initrd: \"images/pxeboot/initrd.img\"\n</code></pre> <p>Benefits: - Automatically detects latest version (e.g., 41) - Validates kernel and initrd URLs exist - One config block = infinite menus - Track changes in git</p>"},{"location":"#how-does-it-work","title":"How does it work?","text":"<pre><code>graph LR\n    A[YAML Config] --&gt;|Parse| B[Generator]\n    C[Metadata APIs] --&gt;|Fetch versions| B\n    B --&gt;|Validate URLs| D[HTTP Checks]\n    D --&gt;|All valid| E[Generated Menu]\n    B --&gt;|Skip checks| F[Fast Mode Menu]</code></pre> <ol> <li>Define - Write a YAML config describing your distributions</li> <li>Fetch - Generator queries metadata providers for latest versions</li> <li>Validate - HTTP HEAD requests verify all boot files exist</li> <li>Generate - Jinja2 templates produce iPXE menu files</li> </ol>"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#dynamic-version-detection","title":"\ud83d\udd04 Dynamic Version Detection","text":"<p>Never hardcode versions again. Fedora, Debian, and other metadata providers automatically supply the latest stable versions.</p>"},{"location":"#url-validation","title":"\u2705 URL Validation","text":"<p>Every kernel, initrd, and boot file is checked before being added to your menu. Catch broken mirrors before your users do.</p>"},{"location":"#modular-architecture","title":"\ud83c\udfaf Modular Architecture","text":"<p>Plugin system makes adding new distributions straightforward. Write one Python class, register it, done.</p>"},{"location":"#fast-mode","title":"\ud83d\ude80 Fast Mode","text":"<p>Skip validation when iterating on menu layout. Re-validate when you're ready to deploy.</p>"},{"location":"#custom-templates","title":"\ud83d\udcdd Custom Templates","text":"<p>Jinja2 templates mean full control over menu appearance and behavior. Override defaults or build entirely custom layouts.</p>"},{"location":"#modern-tooling","title":"\ud83c\udfd7\ufe0f Modern Tooling","text":"<p>Built with Hatch for reproducible environments. Full test suite. Markdown-linted documentation. Type hints throughout.</p>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Ready to automate your boot menu? </p> <ol> <li>Set up infrastructure - See the Server Setup Guide to configure DHCP, TFTP, and HTTP servers</li> <li>Generate your menu - Follow the Getting Started Guide for a complete walkthrough</li> </ol> <p>Or jump straight to the Reference for command and configuration details.</p>"},{"location":"#faq","title":"FAQ","text":""},{"location":"#does-this-replace-ipxe","title":"Does this replace iPXE?","text":"<p>No. This generates iPXE menu files. You still need an iPXE server to serve them.</p>"},{"location":"#what-distributions-are-supported","title":"What distributions are supported?","text":"<p>Currently: Fedora (dynamic versions), plus static configs for Debian, CentOS, netboot.xyz. Adding new ones takes ~50 lines of Python.</p>"},{"location":"#can-i-use-this-in-production","title":"Can I use this in production?","text":"<p>Yes. URL validation ensures menus work before deployment. Many users run this in homelabs and small datacenters.</p>"},{"location":"#does-it-work-with-uefi","title":"Does it work with UEFI?","text":"<p>Yes, iPXE menus work with both BIOS and UEFI. This tool is menu-generation only\u2014your iPXE server setup determines boot mode.</p>"},{"location":"#can-i-add-my-own-custom-os-images","title":"Can I add my own custom OS images?","text":"<p>Absolutely. Static distributions support arbitrary URLs. For internal images, add them as static entries in your config.</p>"},{"location":"#how-do-i-contribute","title":"How do I contribute?","text":"<p>See the Contributing Guide for development setup, testing, and how to add new distribution plugins.</p>"},{"location":"#links","title":"Links","text":"<ul> <li>Getting Started - Create your first boot menu</li> <li>Server Setup - Configure DHCP, TFTP, and HTTP infrastructure</li> <li>Reference - Commands and configuration reference</li> <li>Architecture - Technical design and plugin system</li> </ul>"},{"location":"getting-started/","title":"elfshoe - Getting Started","text":"<p>This guide walks you through creating your first iPXE boot menu with elfshoe.</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<p>Before using elfshoe, you need:</p> <ol> <li>Server infrastructure - DHCP, TFTP, and HTTP servers configured for network booting</li> <li>See the Server Setup Guide for complete instructions</li> <li> <p>Includes getting iPXE boot files, configuring DHCP/TFTP, and setting up HTTP delivery</p> </li> <li> <p>Python 3.7 or higher - For running elfshoe</p> </li> <li>Network boot enabled - On client machines (BIOS/UEFI settings)</li> </ol> <p>New to network booting? Start with the Server Setup Guide to get your infrastructure ready.</p>"},{"location":"getting-started/#how-it-works","title":"How It Works","text":"<ol> <li>Configure - Define OS distributions in <code>config.yaml</code></li> <li>Generate - Run <code>elfshoe</code> to create <code>elfshoe.ipxe</code></li> <li>Deploy - Serve <code>elfshoe.ipxe</code> from your web server</li> <li>Boot - Client machines PXE boot and display your menu</li> </ol>"},{"location":"getting-started/#quick-example","title":"Quick Example","text":""},{"location":"getting-started/#1-create-configyaml","title":"1. Create config.yaml","text":"<p>Start with the example configuration:</p> <pre><code># Copy the example config\ncp docs/examples/config.yaml config.yaml\n\n# Or view it at: docs/examples/config.yaml\n</code></pre> <p>Example configuration:</p> <pre><code># iPXE Menu Generator Configuration\n# Complete example showing all features\n\n# Main menu settings\nmenu:\n  title: \"Network Boot Menu\"\n  default_item: \"fedora_menu\"\n  timeout: 30000  # milliseconds (30 seconds)\n  error_timeout: 30000  # milliseconds - how long to show errors before returning to menu\n\n# Distribution configurations\n# Each distribution can be either \"dynamic\" (auto-fetch versions) or \"static\" (manual versions)\ndistributions:\n\n  # Example 1: Dynamic distribution with metadata provider\n  # Fedora versions are fetched automatically from releases.json\n  fedora:\n    enabled: true\n    label: \"Fedora\"\n    type: \"dynamic\"\n    metadata_provider: \"fedora\"  # Use Fedora metadata fetcher\n    metadata_url: \"https://fedoraproject.org/releases.json\"\n\n    # Metadata filters control which versions/architectures to include\n    metadata_filter:\n      variant: \"Server\"  # Only Server variant (other options: Workstation, Cloud, etc.)\n      architectures: [x86_64, aarch64]  # Fetch these architectures from metadata\n      latest: 3  # Only show 3 most recent versions\n\n    # Architecture name mapping: iPXE uses different names than distributions\n    arch_map:\n      arm64: aarch64  # Map iPXE \"arm64\" to Fedora's \"aarch64\"\n      x86_64: x86_64  # iPXE and Fedora both use \"x86_64\"\n\n    # URL template with {version} and {arch} placeholders\n    url_template: \"http://download.fedoraproject.org/pub/fedora/linux/releases/{version}/Server/{arch}/os\"\n\n    boot_files:\n      kernel: \"images/pxeboot/vmlinuz\"\n      initrd: \"images/pxeboot/initrd.img\"\n\n    boot_params: \"inst.repo={base_url}/\"\n\n  # Example 2: Static distribution without architecture mapping\n  # CentOS versions are specified manually\n  centos:\n    enabled: true\n    label: \"CentOS Stream\"\n    type: \"static\"\n\n    # Manually specify versions and their supported architectures\n    versions:\n      - version: \"10\"\n        architectures: [x86_64]  # Stream 10 only supports x86_64 currently\n      - version: \"9\"\n        architectures: [x86_64, arm64]  # Stream 9 supports both\n\n    url_template: \"http://mirror.stream.centos.org/{version}-stream/BaseOS/{arch}/os\"\n\n    boot_files:\n      kernel: \"images/pxeboot/vmlinuz\"\n      initrd: \"images/pxeboot/initrd.img\"\n\n    boot_params: \"inst.repo={base_url}/\"\n\n  # Example 3: Static distribution with arch_map and release names\n  # Debian uses different architecture names than iPXE\n  debian:\n    enabled: true\n    label: \"Debian\"\n    type: \"static\"\n\n    # Debian calls x86_64 \"amd64\" - use arch_map to translate\n    arch_map:\n      x86_64: amd64  # iPXE \"x86_64\" \u2192 Debian \"amd64\"\n      arm64: arm64   # Both use \"arm64\"\n\n    versions:\n      - version: \"bookworm\"\n        name: \"12 Bookworm\"  # Optional: human-friendly release name\n        architectures: [x86_64, arm64]\n      - version: \"trixie\"\n        name: \"13 Trixie\"\n        architectures: [x86_64, arm64]\n\n    url_template: \"http://deb.debian.org/debian/dists/{version}/main/installer-{arch}/current/images/netboot/debian-installer/{arch}\"\n\n    boot_files:\n      kernel: \"linux\"\n      initrd: \"initrd.gz\"\n\n    boot_params: \"\"\n\n# Additional menu items (non-distribution options)\nadditional_items:\n  # Chain to another iPXE script\n  - id: \"netboot\"\n    label: \"netboot.xyz\"\n    type: \"chain\"\n    url: \"http://boot.netboot.xyz\"\n\n  # Open iPXE shell\n  - id: \"shell\"\n    label: \"iPXE Shell\"\n    type: \"shell\"\n\n  # Exit to BIOS/UEFI\n  - id: \"exit\"\n    label: \"Exit to BIOS\"\n    type: \"exit\"\n</code></pre>"},{"location":"getting-started/#2-generate-menu","title":"2. Generate menu","text":"<pre><code>elfshoe\n</code></pre>"},{"location":"getting-started/#3-result","title":"3. Result","text":"<p>You get a <code>elfshoe.ipxe</code> file that looks like:</p> <pre><code>#!ipxe\ndhcp\n\n:start\nmenu Network Boot Menu\nitem --gap -- Operating Systems:\nitem fedora_menu Fedora\nitem centos_menu CentOS Stream\nitem debian_menu Debian\nitem --gap -- Other Options:\nitem netboot netboot.xyz\nitem --gap -- Advanced:\nitem shell iPXE Shell\nitem exit Exit to BIOS\nchoose --default fedora_menu --timeout 30000 target &amp;&amp; goto ${target}\n\n:fedora_menu\n# Architecture-aware menu - shows only matching client architecture\nmenu Fedora - Select Version\niseq ${buildarch} x86_64 &amp;&amp; item fedora_43_x86_64 Fedora 43 Server (x86_64) ||\niseq ${buildarch} arm64 &amp;&amp; item fedora_43_arm64 Fedora 43 Server (aarch64) ||\niseq ${buildarch} x86_64 &amp;&amp; item fedora_42_x86_64 Fedora 42 Server (x86_64) ||\niseq ${buildarch} arm64 &amp;&amp; item fedora_42_arm64 Fedora 42 Server (aarch64) ||\nitem --gap --\nitem back_fedora_menu Back to main menu\nchoose --default fedora_43_x86_64 target &amp;&amp; goto ${target}\n\n:fedora_43_x86_64\ninitrd http://download.fedoraproject.org/pub/fedora/linux/releases/43/Server/x86_64/os/images/pxeboot/initrd.img\nchain http://download.fedoraproject.org/pub/fedora/linux/releases/43/Server/x86_64/os/images/pxeboot/vmlinuz initrd=initrd.img inst.repo=http://download.fedoraproject.org/pub/fedora/linux/releases/43/Server/x86_64/os/ || goto fedora_menu_error\n\n:fedora_43_arm64\ninitrd http://download.fedoraproject.org/pub/fedora/linux/releases/43/Server/aarch64/os/images/pxeboot/initrd.img\nchain http://download.fedoraproject.org/pub/fedora/linux/releases/43/Server/aarch64/os/images/pxeboot/vmlinuz initrd=initrd.img inst.repo=http://download.fedoraproject.org/pub/fedora/linux/releases/43/Server/aarch64/os/ || goto fedora_menu_error\n\n# ... similar sections for other versions ...\n</code></pre> <p>Key features: - Architecture-aware menus - x86_64 clients only see x86_64 options, ARM64 clients only see ARM64 options - Automatic filtering - Uses iPXE's <code>iseq ${buildarch}</code> to show only compatible entries - Human-friendly labels - \"Fedora 43 Server (x86_64)\" clearly shows what you're booting - Error handling - Built-in navigation and error recovery</p>"},{"location":"getting-started/#key-concepts","title":"Key Concepts","text":""},{"location":"getting-started/#architecture-support","title":"Architecture Support","text":"<p>elfshoe automatically handles multiple CPU architectures (x86_64, ARM64, etc.) with smart client filtering:</p> <p>What you configure: <pre><code>distributions:\n  fedora:\n    type: dynamic\n    metadata_filter:\n      variant: Server\n      architectures: [x86_64, aarch64]  # Fetch both architectures\n    arch_map:\n      arm64: aarch64  # Map iPXE's arm64 to Fedora's aarch64\n</code></pre></p> <p>What clients see:</p> <p>x86_64 client menu: <pre><code>Fedora - Select Version\n  \u2022 Fedora 43 Server (x86_64)\n  \u2022 Fedora 42 Server (x86_64)\n  \u2022 Fedora 41 Server (x86_64)\n</code></pre></p> <p>ARM64 client menu: <pre><code>Fedora - Select Version\n  \u2022 Fedora 43 Server (aarch64)\n  \u2022 Fedora 42 Server (aarch64)\n  \u2022 Fedora 41 Server (aarch64)\n</code></pre></p> <p>How it works: - Uses iPXE's <code>${buildarch}</code> variable to detect client architecture - <code>iseq ${buildarch} x86_64 &amp;&amp; item ...</code> shows items only to matching clients - No wrong architecture served - clients only see what works for them</p> <p>Supported architectures: - <code>x86_64</code> - 64-bit x86 (most common) - <code>arm64</code> - 64-bit ARM (Raspberry Pi 4, Apple Silicon, etc.) - <code>i386</code> - 32-bit x86 (legacy) - <code>arm</code> - 32-bit ARM (older devices)</p>"},{"location":"getting-started/#static-vs-dynamic-distributions","title":"Static vs Dynamic Distributions","text":"<p>Static - You specify versions and architectures manually: <pre><code>distributions:\n  debian:\n    type: \"static\"\n    arch_map:\n      x86_64: amd64  # Map iPXE names to Debian names\n    versions:\n      - version: \"bookworm\"\n        name: \"12 Bookworm\"\n        architectures: [x86_64, arm64]\n</code></pre></p> <p>Dynamic - Versions and architectures fetched automatically from metadata: <pre><code>distributions:\n  fedora:\n    type: \"dynamic\"\n    metadata_provider: \"fedora\"\n    metadata_url: \"https://fedoraproject.org/releases.json\"\n    metadata_filter:\n      variant: Server\n      architectures: [x86_64, aarch64]\n</code></pre></p>"},{"location":"getting-started/#url-validation","title":"URL Validation","text":"<p>By default, the generator checks that kernel/initrd files exist before adding them to the menu:</p> <ul> <li>Fast mode (<code>elfshoe --no-validate</code>): Skip validation (~1 second)</li> <li>Validated mode (<code>elfshoe</code>): Check all URLs (~30-45 seconds)</li> </ul> <p>Use fast mode during development, validated mode before deployment.</p> <p>Note: With multi-architecture support, each architecture is validated separately, so validation may take longer for distributions with multiple architectures.</p>"},{"location":"getting-started/#architecture-overview","title":"Architecture Overview","text":"<pre><code>config.yaml \u2192 Builder \u2192 MenuGenerator \u2192 elfshoe.ipxe\n                \u2193\n          [Validator]\n                \u2193\n       [MetadataFetchers]\n</code></pre> <p>For detailed architecture, see Architecture Documentation.</p>"},{"location":"getting-started/#common-workflows","title":"Common Workflows","text":""},{"location":"getting-started/#adding-a-new-distribution","title":"Adding a New Distribution","text":"<p>Option 1: Static (simple) <pre><code>distributions:\n  rocky:\n    enabled: true\n    type: \"static\"\n    label: \"Rocky Linux\"\n    arch_map:\n      arm64: aarch64  # Map architecture names if needed\n    versions:\n      - version: \"9\"\n        label: \"Rocky Linux 9\"\n        architectures: [x86_64, arm64]  # Optional: specify per version\n    url_template: \"http://mirror.example.com/rocky/{version}/BaseOS/{arch}/os\"\n    boot_files:\n      kernel: \"images/pxeboot/vmlinuz\"\n      initrd: \"images/pxeboot/initrd.img\"\n</code></pre></p> <p>Option 2: Dynamic (advanced)</p> <p>See Adding Distributions for creating metadata fetcher plugins.</p>"},{"location":"getting-started/#customizing-boot-parameters","title":"Customizing Boot Parameters","text":"<pre><code>boot_params: \"console=ttyS0,115200 inst.ks=http://server/kickstart.cfg\"\n</code></pre>"},{"location":"getting-started/#testing-your-menu","title":"Testing Your Menu","text":"<pre><code># Quick test without validation\nelfshoe --skip-validation\n\n# Check generated menu\ncat elfshoe.ipxe\n\n# Validate all URLs work\nelfshoe\n</code></pre>"},{"location":"getting-started/#performance","title":"Performance","text":"<ul> <li>Without validation: &lt;1 second</li> <li>With validation: 30-45 seconds (depends on network/mirrors)</li> <li>URL checks: Parallel HEAD requests with 10s timeout</li> </ul>"},{"location":"getting-started/#security","title":"Security","text":"<ul> <li>No code execution - Config is pure YAML data, no code</li> <li>Safe YAML parsing - Uses <code>yaml.safe_load()</code> only</li> <li>URL validation - Prevents broken links in menus</li> <li>Timeouts - All HTTP requests have 10 second timeouts</li> </ul>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":""},{"location":"getting-started/#deploy-your-menu","title":"Deploy Your Menu","text":"<p>Copy the generated <code>elfshoe.ipxe</code> to your HTTP server:</p> <pre><code># Example: Copy to nginx web root\nsudo cp elfshoe.ipxe /var/www/pxe/\n\n# Or to Apache\nsudo cp elfshoe.ipxe /var/www/html/pxe/\n</code></pre> <p>Don't have a server set up yet? See the Server Setup Guide for: - Installing and configuring DHCP/TFTP servers (dnsmasq, ISC DHCP, Windows) - Setting up HTTP servers (nginx, Apache) - Getting iPXE boot files - Complete deployment instructions</p>"},{"location":"getting-started/#test-network-booting","title":"Test Network Booting","text":"<ol> <li>Enable network boot in your client's BIOS/UEFI settings</li> <li>Boot the client - it should:</li> <li>Get an IP from DHCP</li> <li>Download iPXE bootloader via TFTP</li> <li>Load your elfshoe menu via HTTP</li> <li>Display your boot options</li> </ol>"},{"location":"getting-started/#troubleshooting","title":"Troubleshooting","text":"<p>Menu doesn't appear: - Verify HTTP server is accessible: <code>curl http://your-server/elfshoe.ipxe</code> - Check client can reach server (ping, firewall rules) - Review DHCP/TFTP logs</p> <p>URLs fail validation: - Check mirror URLs are accessible - Try a different mirror - Use <code>--skip-validation</code> for testing (not recommended for production)</p> <p>For infrastructure issues, see the Server Setup Guide - Troubleshooting.</p>"},{"location":"getting-started/#learn-more","title":"Learn More","text":"<ul> <li>Reference - Complete command and configuration reference</li> <li>Server Setup - DHCP, TFTP, HTTP configuration details</li> <li>Adding Distributions - Extend with new OSes</li> <li>Contributing - Add features or fix bugs</li> </ul>"},{"location":"reference/","title":"elfshoe - Reference","text":""},{"location":"reference/#command-line-tools","title":"Command-Line Tools","text":""},{"location":"reference/#elfshoe","title":"elfshoe","text":"<p>The <code>elfshoe</code> command generates iPXE boot menu scripts from YAML configuration files.</p>"},{"location":"reference/#command-line-usage","title":"Command Line Usage","text":"<pre><code># Generate menu with validation (recommended)\nelfshoe\n\n# Fast generation (no validation)\nelfshoe --skip-validation\n\n# Custom config and output files\nelfshoe -c custom-config.yaml -o custom-elfshoe.ipxe\n\n# Quiet mode (no output unless errors)\nelfshoe --quiet\n\n# Show help\nelfshoe --help\n</code></pre>"},{"location":"reference/#command-options","title":"Command Options","text":"<ul> <li><code>-c, --config FILE</code> - Path to config file (default: <code>config.yaml</code>)</li> <li><code>-o, --output FILE</code> - Output file path (default: <code>elfshoe.ipxe</code>)</li> <li><code>--skip-validation</code> - Skip URL validation for faster generation</li> <li><code>--quiet</code> - Quiet mode, only show errors</li> <li><code>--help</code> - Show help message</li> </ul>"},{"location":"reference/#command-line-options","title":"Command Line Options","text":"<pre><code>elfshoe [OPTIONS]\n\nOptions:\n  -c, --config FILE     Configuration file (default: config.yaml)\n  -o, --output FILE     Output file (default: elfshoe.ipxe)\n  --no-validate         Skip URL validation (faster)\n  --quiet              Minimal output\n  --help               Show help message\n</code></pre>"},{"location":"reference/#ipxelint","title":"ipxelint","text":"<p>The <code>ipxelint</code> tool validates iPXE scripts for syntax errors and common mistakes.</p>"},{"location":"reference/#basic-usage","title":"Basic Usage","text":"<pre><code># Validate a single file\nipxelint elfshoe.ipxe\n\n# Validate multiple files\nipxelint *.ipxe\n\n# Treat warnings as errors (CI-friendly)\nipxelint --strict elfshoe.ipxe\n\n# Only show errors\nipxelint --quiet elfshoe.ipxe\n</code></pre>"},{"location":"reference/#what-it-checks","title":"What It Checks","text":"<ul> <li>Shebang: Ensures script starts with <code>#!ipxe</code></li> <li>Menu balance: Warns if menu/choose statements are unbalanced</li> <li>Label references: Detects undefined label references in goto statements</li> <li>Command syntax: Warns about unknown or potentially misspelled commands</li> </ul>"},{"location":"reference/#exit-codes","title":"Exit Codes","text":"<ul> <li><code>0</code>: All files passed validation</li> <li><code>1</code>: At least one file had errors (or warnings with <code>--strict</code>)</li> </ul>"},{"location":"reference/#example-output","title":"Example Output","text":"<pre><code>\u2713 elfshoe.ipxe: OK\n\n\u26a0\ufe0f  custom.ipxe: WARNINGS\n  Line 12: Unknown or potentially misspelled command: 'slepe'\n\n\u274c broken.ipxe: FAILED\n  Line 1: Missing or invalid #!ipxe shebang\n  Line 15: Reference to undefined label: 'non_existent'\n</code></pre>"},{"location":"reference/#command-line-options-full-reference","title":"Command Line Options Full Reference","text":"<pre><code>-c, --config FILE      # Config file (default: config.yaml)\n-o, --output FILE      # Output file (default: elfshoe.ipxe)\n--no-validate          # Skip URL validation (faster)\n-q, --quiet            # Minimal output\n--version              # Show version\n  -h, --help             # Show help\n</code></pre>"},{"location":"reference/#configuration-file-structure","title":"Configuration File Structure","text":"<pre><code>menu:\n  title: \"Your Menu Title\"\n  default_item: \"distribution_menu\"\n  timeout: 30000        # Menu timeout (ms)\n  error_timeout: 30000  # Error display timeout (ms)\n\ndistributions:\n  distro_name:\n    enabled: true|false\n    label: \"Display Label\"\n    type: \"static\"|\"dynamic\"\n\n    # Architecture support (optional)\n    arch_map:\n      arm64: aarch64      # Map iPXE arch names to distro arch names\n      x86_64: x86_64\n\n    # For static type:\n    versions:\n      - version: \"X\"\n        name: \"Release Name\"  # Optional\n        architectures: [x86_64, arm64]  # Optional: per-version control\n\n    # For dynamic type:\n    metadata_provider: \"provider_name\"  # e.g., \"fedora\"\n    metadata_url: \"https://...\"\n    metadata_filter:\n      variant: \"Server\"\n      architectures: [x86_64, aarch64]  # Filter for specific architectures\n      latest: 3           # Optional: limit to N latest versions\n\n    # Common fields:\n    url_template: \"http://example.com/{version}/{arch}/path\"  # Use {arch} placeholder\n    boot_files:\n      kernel: \"path/to/vmlinuz\"\n      initrd: \"path/to/initrd.img\"\n    boot_params: \"kernel_params_here\"\n\nadditional_items:\n  - id: \"unique_id\"\n    label: \"Display Label\"\n    type: \"chain\"|\"shell\"|\"exit\"\n    url: \"http://...\"  # for chain type only\n</code></pre>"},{"location":"reference/#url-templates","title":"URL Templates","text":"<p>Use <code>{version}</code> and <code>{arch}</code> placeholders in URL templates:</p> <pre><code># Fedora with architecture support\nurl_template: \"http://download.fedoraproject.org/pub/fedora/linux/releases/{version}/Server/{arch}/os\"\n\n# CentOS Stream with architecture\nurl_template: \"http://mirror.stream.centos.org/{version}-stream/BaseOS/{arch}/os\"\n\n# Debian with architecture\nurl_template: \"http://deb.debian.org/debian/dists/{version}/main/installer-{arch}/current/images/netboot/debian-installer/{arch}\"\n</code></pre>"},{"location":"reference/#architecture-support","title":"Architecture Support","text":""},{"location":"reference/#overview","title":"Overview","text":"<p>elfshoe supports multiple CPU architectures with automatic client filtering:</p> <ul> <li>x86_64 - 64-bit x86 (most servers and desktops)</li> <li>arm64 - 64-bit ARM (Raspberry Pi 4, Apple Silicon, AWS Graviton)</li> <li>i386 - 32-bit x86 (legacy systems)</li> <li>arm - 32-bit ARM (older embedded devices)</li> </ul>"},{"location":"reference/#architecture-name-mapping","title":"Architecture Name Mapping","text":"<p>Different distributions use different architecture names. Use <code>arch_map</code> to translate:</p> <pre><code>distributions:\n  fedora:\n    arch_map:\n      arm64: aarch64  # iPXE calls it arm64, Fedora calls it aarch64\n      x86_64: x86_64\n\n  debian:\n    arch_map:\n      x86_64: amd64   # iPXE calls it x86_64, Debian calls it amd64\n      arm64: arm64\n</code></pre> <p>Common mappings:</p> iPXE Name Fedora/RHEL Debian/Ubuntu x86_64 x86_64 amd64 arm64 aarch64 arm64 i386 i386 i386 arm armhfp armhf"},{"location":"reference/#dynamic-distributions-metadata-driven","title":"Dynamic Distributions (Metadata-Driven)","text":"<p>For Fedora and other distributions with metadata providers:</p> <pre><code>fedora:\n  type: dynamic\n  metadata_filter:\n    variant: Server\n    architectures: [x86_64, aarch64]  # \u2190 Filter metadata\n    latest: 3\n  arch_map:\n    arm64: aarch64\n  url_template: \"https://.../{version}/Server/{arch}/os\"\n</code></pre> <p>Behavior: - Fetches metadata for specified architectures - Only includes versions that exist in metadata - Validates URLs for each architecture - Skips architectures not available in metadata</p>"},{"location":"reference/#static-distributions-manual-configuration","title":"Static Distributions (Manual Configuration)","text":"<p>For distributions without metadata providers:</p> <pre><code>debian:\n  type: static\n  arch_map:\n    x86_64: amd64\n  versions:\n    - version: \"bookworm\"\n      name: \"12 Bookworm\"\n      architectures: [x86_64, arm64]  # \u2190 Per-version control\n    - version: \"bullseye\"\n      name: \"11 Bullseye\"\n      architectures: [x86_64]  # Only x86_64 for this version\n</code></pre> <p>Behavior: - You specify which architectures each version supports - Can vary architectures per version - Validates URLs for each specified architecture</p>"},{"location":"reference/#client-side-filtering","title":"Client-Side Filtering","text":"<p>Generated menus use <code>iseq ${buildarch}</code> to filter items:</p> <pre><code>menu Fedora - Select Version\niseq ${buildarch} x86_64 &amp;&amp; item fedora_43_x86_64 Fedora 43 Server (x86_64) ||\niseq ${buildarch} arm64 &amp;&amp; item fedora_43_arm64 Fedora 43 Server (aarch64) ||\n</code></pre> <p>Result: - x86_64 clients only see x86_64 menu items - ARM64 clients only see ARM64 menu items - No manual selection needed - No wrong architecture served</p>"},{"location":"reference/#single-architecture-default","title":"Single Architecture (Default)","text":"<p>If you don't specify architectures, defaults to x86_64 only:</p> <pre><code>centos:\n  type: static\n  versions:\n    - version: \"9\"\n  url_template: \"http://mirror.centos.org/{version}/BaseOS/x86_64/os\"\n</code></pre> <p>This is backward compatible with existing configurations.</p>"},{"location":"reference/#boot-parameters","title":"Boot Parameters","text":"<p>Use <code>{base_url}</code> in boot parameters:</p> <pre><code># Repository installation\nboot_params: \"inst.repo={base_url}/\"\n\n# Network configuration\nboot_params: \"ip=dhcp inst.repo={base_url}/\"\n\n# Text mode\nboot_params: \"inst.text inst.repo={base_url}/\"\n</code></pre>"},{"location":"reference/#command-line-options_1","title":"Command-Line Options","text":"<pre><code>-c, --config FILE      # Config file (default: config.yaml)\n-o, --output FILE      # Output file (default: elfshoe.ipxe)\n--no-validate          # Skip URL validation (faster)\n-q, --quiet            # Minimal output\n--version              # Show version\n-h, --help             # Show help\n</code></pre>"},{"location":"reference/#file-locations","title":"File Locations","text":"<pre><code>Project Root/\n\u251c\u2500\u2500 config.yaml              # Main configuration (see docs/examples/config.yaml)\n\u251c\u2500\u2500 elfshoe.ipxe             # Generated menu (output)\n\u251c\u2500\u2500 docs/\n\u2502   \u2514\u2500\u2500 examples/\n\u2502       \u251c\u2500\u2500 config.yaml      # Complete example with all features\n\u2502       \u2514\u2500\u2500 99-dnsmasq-pxe-ipxe.conf  # dnsmasq config example\n\u251c\u2500\u2500 src/elfshoe/             # Package source\n\u2502   \u251c\u2500\u2500 core/                # Core components\n\u2502   \u251c\u2500\u2500 distributions/       # Distribution plugins\n\u2502   \u2514\u2500\u2500 templates/           # Jinja2 templates\n\u2514\u2500\u2500 tests/                   # Test suite\n</code></pre>"},{"location":"reference/#adding-a-distribution","title":"Adding a Distribution","text":""},{"location":"reference/#static-simple","title":"Static (Simple)","text":"<p>Add to <code>config.yaml</code>:</p> <pre><code>distributions:\n  mylinux:\n    enabled: true\n    type: \"static\"\n    label: \"My Linux\"\n    versions:\n      - version: \"1.0\"\n        label: \"My Linux 1.0\"\n    url_template: \"http://mirror.example.com/{version}/os\"\n    boot_files:\n      kernel: \"vmlinuz\"\n      initrd: \"initrd.img\"\n    boot_params: \"\"\n</code></pre>"},{"location":"reference/#dynamic-distribution-automatic-version-detection","title":"Dynamic Distribution (Automatic Version Detection)","text":"<p>For distributions like Fedora that support automatic version detection:</p> <pre><code>distributions:\n  fedora:\n    enabled: true\n    type: \"dynamic\"\n    label: \"Fedora\"\n    metadata_provider: \"fedora\"\n    metadata_url: \"https://fedoraproject.org/releases.json\"\n    metadata_filter:\n      variant: \"Server\"\n      architectures: [x86_64, aarch64]\n      latest: 3  # Only show 3 most recent versions\n    arch_map:\n      arm64: aarch64  # Map iPXE arm64 to Fedora aarch64\n    url_template: \"http://download.fedoraproject.org/pub/fedora/linux/releases/{version}/Server/{arch}/os\"\n    boot_files:\n      kernel: \"images/pxeboot/vmlinuz\"\n      initrd: \"images/pxeboot/initrd.img\"\n    boot_params: \"inst.repo={base_url}/\"\n</code></pre> <p>Note: To add custom metadata providers, see the Adding Distributions guide.</p>"},{"location":"reference/#troubleshooting","title":"Troubleshooting","text":""},{"location":"reference/#menu-generation-is-slow","title":"Menu Generation is Slow","text":"<pre><code># Skip URL validation for faster generation (development mode)\nelfshoe --skip-validation\n# or\nelfshoe --no-validate\n</code></pre> <p>Tip: Use validation in production to catch broken URLs, but skip it during development/testing.</p>"},{"location":"reference/#menu-generation-fails","title":"Menu Generation Fails","text":"<pre><code># Run with validation to see which URLs are failing\nelfshoe\n\n# Test specific URL manually\ncurl -I http://your-mirror-url/vmlinuz\n</code></pre>"},{"location":"reference/#boot-files-not-found-404-errors","title":"Boot Files Not Found (404 errors)","text":"<ul> <li>Check that the <code>url_template</code> is correct for your mirror</li> <li>Verify <code>boot_files</code> paths match your distribution's file structure</li> <li>Test the full URL: <code>{url_template}/{kernel_path}</code></li> <li>Try a different mirror if the current one is down</li> </ul>"},{"location":"reference/#ipxe-shows-no-such-file","title":"iPXE Shows \"No Such File\"","text":"<p>This usually means: 1. The URL in the generated menu is incorrect 2. The web server hosting the files is not accessible from the client 3. The file paths in <code>boot_files</code> don't match the actual file locations</p> <p>Solutions:</p> <pre><code># Regenerate menu with validation to check URLs\nelfshoe\n\n# Verify your web server can serve the files\ncurl http://your-server/path/to/vmlinuz\n\n# Check the generated elfshoe.ipxe file for correct URLs\ncat elfshoe.ipxe | grep -A5 \"boot_fedora\"\n</code></pre>"},{"location":"reference/#performance","title":"Performance","text":"<ul> <li>With validation: 30-45 seconds (checks all URLs exist)</li> <li>Without validation: &lt;1 second (generates menu only)</li> <li>Recommendation: Use validation before deploying to production</li> </ul>"},{"location":"reference/#version-detection","title":"Version Detection","text":""},{"location":"reference/#fedora-dynamic","title":"Fedora (Dynamic)","text":"<ul> <li>Fetches versions from: <code>https://fedoraproject.org/releases.json</code></li> <li>Filters by: <code>variant=Server</code>, <code>arch=x86_64</code></li> <li>Returns: Latest 3-5 supported versions automatically</li> </ul>"},{"location":"reference/#other-distributions","title":"Other Distributions","text":"<ul> <li>CentOS, Debian, Rocky: Use static version lists</li> <li>Custom distributions: Can add dynamic metadata providers (see contributor docs)</li> </ul>"},{"location":"reference/#ipxe-boot-process","title":"iPXE Boot Process","text":""},{"location":"reference/#how-it-works","title":"How It Works","text":"<ol> <li>Client machine boots via PXE</li> <li>DHCP server provides iPXE binary location</li> <li>iPXE loads and fetches <code>elfshoe.ipxe</code> from your web server</li> <li>User selects OS from menu</li> <li>iPXE downloads kernel and initrd</li> <li>Boot proceeds with specified parameters</li> </ol>"},{"location":"reference/#generated-menu-structure","title":"Generated Menu Structure","text":"<pre><code>#!ipxe\n\n:start\nmenu Network Boot Menu\nitem fedora_38 Fedora 38 Server\nchoose selected\ngoto ${selected}\n\n:fedora_38\necho Booting Fedora 38 Server...\ninitrd http://mirror/fedora/38/images/pxeboot/initrd.img || goto error\nkernel http://mirror/fedora/38/images/pxeboot/vmlinuz initrd=initrd.img inst.repo=http://mirror/fedora/38/ || goto error\nboot\n\n:error\necho Boot failed!\nprompt --timeout ${error_timeout}\ngoto start\n</code></pre>"},{"location":"reference/#boot-parameters_1","title":"Boot Parameters","text":"<p>Common parameters you can add to <code>boot_params</code>: - Fedora/RHEL: <code>inst.repo={base_url}/ inst.ks=http://server/kickstart.cfg</code> - Debian/Ubuntu: <code>auto=true url=http://server/preseed.cfg</code> - Generic: <code>console=ttyS0,115200</code> (for serial console)</p>"},{"location":"reference/#supported-file-types","title":"Supported File Types","text":"<ul> <li>Kernel: <code>vmlinuz</code>, <code>linux</code>, <code>bzImage</code></li> <li>Initrd: <code>initrd.img</code>, <code>initrd.gz</code>, <code>initramfs</code></li> </ul>"},{"location":"reference/#related-documentation","title":"Related Documentation","text":"<ul> <li>Home - Full documentation</li> <li>Getting Started - Concepts and overview</li> <li>Contributing - For contributors</li> </ul>"},{"location":"server-setup/","title":"Server Setup Guide","text":"<p>This guide covers setting up the complete network boot infrastructure needed to use elfshoe-generated menus.</p>"},{"location":"server-setup/#overview","title":"Overview","text":"<p>Network booting with iPXE requires three components:</p> <ol> <li>DHCP Server - Directs clients to the TFTP server and boot files</li> <li>TFTP Server - Serves iPXE boot loaders (ipxe.pxe, ipxe.efi)</li> <li>HTTP Server - Serves your elfshoe-generated menu and OS installation files</li> </ol> <pre><code>graph LR\n    A[PXE Client] --&gt;|DHCP Request| B[DHCP Server]\n    B --&gt;|Boot from TFTP| A\n    A --&gt;|Download ipxe.efi| C[TFTP Server]\n    C --&gt;|Return iPXE| A\n    A --&gt;|Load elfshoe.ipxe| D[HTTP Server]\n    D --&gt;|Return menu| A\n    A --&gt;|Boot OS| E[OS Mirror]</code></pre>"},{"location":"server-setup/#getting-ipxe-boot-files","title":"Getting iPXE Boot Files","text":""},{"location":"server-setup/#official-ipxe-downloads","title":"Official iPXE Downloads","text":"<p>Download pre-built iPXE binaries from the official iPXE project:</p> <ul> <li>Website: https://ipxe.org/download</li> <li>Direct downloads: https://boot.ipxe.org/</li> </ul> <p>Required files: <pre><code># For BIOS/Legacy systems\nwget https://boot.ipxe.org/ipxe.pxe -O /tftpboot/ipxe.pxe\n\n# For UEFI x86_64 systems (most common)\nwget https://boot.ipxe.org/x86_64-efi/ipxe.efi -O /tftpboot/ipxe.efi\n\n# For UEFI ARM64 systems\nwget https://boot.ipxe.org/arm64-efi/ipxe.efi -O /tftpboot/ipxe-arm64.efi\n\n# Other architectures available at https://boot.ipxe.org/\n# - arm32-efi/ipxe.efi\n# - i386-efi/ipxe.efi\n# - riscv64-efi/ipxe.efi\n# - loong64-efi/ipxe.efi\n</code></pre></p> <p>Note: The root-level <code>https://boot.ipxe.org/ipxe.efi</code> does not exist. Use the architecture-specific paths above.</p>"},{"location":"server-setup/#building-ipxe-from-source","title":"Building iPXE from Source","text":"<p>For custom configurations or embedded scripts, build from source:</p> <pre><code># Clone iPXE repository\ngit clone https://github.com/ipxe/ipxe.git\ncd ipxe/src\n\n# Build BIOS version\nmake bin/ipxe.pxe\n\n# Build UEFI version\nmake bin-x86_64-efi/ipxe.efi\n\n# Copy to TFTP directory\ncp bin/ipxe.pxe /tftpboot/\ncp bin-x86_64-efi/ipxe.efi /tftpboot/\n</code></pre> <p>Documentation: https://ipxe.org/download</p>"},{"location":"server-setup/#dhcp-server-configuration","title":"DHCP Server Configuration","text":""},{"location":"server-setup/#option-1-dnsmasq-recommended-for-simple-setups","title":"Option 1: dnsmasq (Recommended for Simple Setups)","text":"<p>dnsmasq combines DHCP and TFTP in one lightweight daemon.</p> <p>Install: <pre><code># Debian/Ubuntu\nsudo apt install dnsmasq\n\n# RHEL/CentOS/Fedora\nsudo dnf install dnsmasq\n</code></pre></p> <p>Configuration (<code>/etc/dnsmasq.d/pxe-boot.conf</code>):</p> <pre><code># Enable TFTP server\nenable-tftp\ntftp-root=/tftpboot\n\n\n# match all pxe clients\ndhcp-match=set:pxe,60,PXEClient\n# set tag based on client-arch\ndhcp-match=set:bios,option:client-arch,0\ndhcp-match=set:efi-x86_64,option:client-arch,7\ndhcp-match=set:efi-x86_64,option:client-arch,9\ndhcp-match=set:efi-arm64,option:client-arch,11\n\n\n# match ipxe, which can help chainload\ndhcp-match=set:ipxe,175\n\n\n# Direct boot (no menu) - chainload iPXE then elfshoe menu\n## First stage: Load iPXE bootloader\ndhcp-boot=tag:bios,tag:!ipxe,ipxe.pxe\ndhcp-boot=tag:efi-x86_64,tag:!ipxe,ipxe.efi\n\n## Second stage: Load elfshoe menu from TFTP\ndhcp-boot=tag:ipxe,elfshoe.ipxe\n# Note: For HTTP delivery, use a chain loader (see docs/server-setup.md)\n\n# Enable DHCP logging\nlog-dhcp\n</code></pre> <p>Notes: - Adjust <code>tftp-root=/tftpboot</code> to your TFTP directory - <code>elfshoe.ipxe</code> must be a file in the TFTP root (DHCP boot filename option only supports TFTP) - For HTTP delivery, use Option 2 below (chain loader approach) - Supports both BIOS and UEFI clients automatically</p> <p>Restart: <pre><code>sudo systemctl restart dnsmasq\nsudo systemctl enable dnsmasq\n</code></pre></p>"},{"location":"server-setup/#option-2-isc-dhcp-server","title":"Option 2: ISC DHCP Server","text":"<p>For environments already using ISC DHCP.</p> <p>Install: <pre><code># Debian/Ubuntu\nsudo apt install isc-dhcp-server\n\n# RHEL/CentOS/Fedora\nsudo dnf install dhcp-server\n</code></pre></p> <p>Configuration (<code>/etc/dhcp/dhcpd.conf</code>):</p> <pre><code># Detect client architecture\noption architecture-type code 93 = unsigned integer 16;\n\nsubnet 192.168.1.0 netmask 255.255.255.0 {\n    range 192.168.1.100 192.168.1.200;\n    option routers 192.168.1.1;\n    option domain-name-servers 8.8.8.8, 8.8.4.4;\n\n    # TFTP server address\n    next-server 192.168.1.10;\n\n    # Architecture-specific boot files\n    if option architecture-type = 00:00 {\n        # BIOS\n        filename \"ipxe.pxe\";\n    } elsif option architecture-type = 00:07 {\n        # UEFI x86_64\n        filename \"ipxe.efi\";\n    } elsif option architecture-type = 00:09 {\n        # UEFI x86_64 (alternative)\n        filename \"ipxe.efi\";\n    } elsif option architecture-type = 00:0b {\n        # UEFI ARM64\n        filename \"ipxe-arm64.efi\";\n    }\n}\n</code></pre> <p>Restart: <pre><code>sudo systemctl restart isc-dhcp-server\nsudo systemctl enable isc-dhcp-server\n</code></pre></p>"},{"location":"server-setup/#option-3-windows-dhcp-server","title":"Option 3: Windows DHCP Server","text":"<p>For Windows Server environments.</p> <ol> <li>Open DHCP Management Console</li> <li>Right-click your scope \u2192 Scope Options</li> <li>Configure:</li> <li>Option 66 (Boot Server Host Name): <code>192.168.1.10</code> (your TFTP server IP)</li> <li>Option 67 (Boot File Name): <code>ipxe.efi</code> (or <code>ipxe.pxe</code> for BIOS)</li> </ol> <p>For mixed BIOS/UEFI environments, use DHCP policies: 1. Right-click scope \u2192 Policies \u2192 New Policy 2. Name: \"UEFI Clients\" 3. Conditions: Client identifier \u2192 Match \u2192 <code>00:07</code> (UEFI x86_64) 4. Set Option 67: <code>ipxe.efi</code> 5. Create another policy for BIOS clients (condition: <code>00:00</code>)</p>"},{"location":"server-setup/#tftp-server-setup","title":"TFTP Server Setup","text":""},{"location":"server-setup/#option-1-dnsmasq-tftp-already-configured-above","title":"Option 1: dnsmasq TFTP (Already Configured Above)","text":"<p>If using dnsmasq for DHCP, TFTP is already enabled.</p>"},{"location":"server-setup/#option-2-tftpd-hpa-standalone-tftp","title":"Option 2: tftpd-hpa (Standalone TFTP)","text":"<p>Install: <pre><code># Debian/Ubuntu\nsudo apt install tftpd-hpa\n\n# RHEL/CentOS/Fedora\nsudo dnf install tftp-server\n</code></pre></p> <p>Configure (<code>/etc/default/tftpd-hpa</code>): <pre><code>TFTP_USERNAME=\"tftp\"\nTFTP_DIRECTORY=\"/tftpboot\"\nTFTP_ADDRESS=\"0.0.0.0:69\"\nTFTP_OPTIONS=\"--secure\"\n</code></pre></p> <p>Setup directory: <pre><code>sudo mkdir -p /tftpboot\nsudo chown -R tftp:tftp /tftpboot\nsudo chmod 755 /tftpboot\n</code></pre></p> <p>Start: <pre><code>sudo systemctl restart tftpd-hpa\nsudo systemctl enable tftpd-hpa\n</code></pre></p>"},{"location":"server-setup/#option-3-windows-tftp","title":"Option 3: Windows TFTP","text":"<p>Use a third-party TFTP server like: - Tftpd64 - https://pjo2.github.io/tftpd64/ - SolarWinds TFTP Server</p>"},{"location":"server-setup/#http-server-setup","title":"HTTP Server Setup","text":"<p>Your elfshoe-generated <code>elfshoe.ipxe</code> should be served via HTTP (not TFTP) for better performance.</p>"},{"location":"server-setup/#option-1-nginx","title":"Option 1: nginx","text":"<p>Install: <pre><code># Debian/Ubuntu\nsudo apt install nginx\n\n# RHEL/CentOS/Fedora\nsudo dnf install nginx\n</code></pre></p> <p>Configure (<code>/etc/nginx/sites-available/pxe-boot</code>): <pre><code>server {\n    listen 80;\n    server_name pxe.example.com;\n\n    root /var/www/pxe;\n\n    location / {\n        autoindex on;\n        add_header Cache-Control \"no-cache, must-revalidate\";\n    }\n\n    # Serve elfshoe-generated menu\n    location /elfshoe.ipxe {\n        default_type text/plain;\n    }\n}\n</code></pre></p> <p>Deploy menu: <pre><code>sudo mkdir -p /var/www/pxe\nsudo cp elfshoe.ipxe /var/www/pxe/\nsudo systemctl reload nginx\n</code></pre></p>"},{"location":"server-setup/#option-2-apache","title":"Option 2: Apache","text":"<p>Configure (<code>/etc/apache2/sites-available/pxe-boot.conf</code>): <pre><code>&lt;VirtualHost *:80&gt;\n    ServerName pxe.example.com\n    DocumentRoot /var/www/pxe\n\n    &lt;Directory /var/www/pxe&gt;\n        Options +Indexes\n        Require all granted\n        Header set Cache-Control \"no-cache, must-revalidate\"\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre></p>"},{"location":"server-setup/#option-3-simple-python-http-server-development-only","title":"Option 3: Simple Python HTTP Server (Development Only)","text":"<pre><code>cd /path/to/menu/files\npython3 -m http.server 80\n</code></pre> <p>Note: Not suitable for production use.</p>"},{"location":"server-setup/#ipxe-chain-loading","title":"iPXE Chain Loading","text":""},{"location":"server-setup/#option-1-direct-tftp-simplest-but-slower","title":"Option 1: Direct TFTP (Simplest, but Slower)","text":"<p>Place <code>elfshoe.ipxe</code> in your TFTP root and configure dnsmasq to serve it directly:</p> <pre><code># In dnsmasq config\ndhcp-boot=tag:ipxe,elfshoe.ipxe\n</code></pre> <p>Pros: Simple configuration Cons: TFTP is slow and unreliable for large files; limited to ~32MB file size</p> <p>Best for: Testing and small deployments</p>"},{"location":"server-setup/#option-2-http-chain-loading-recommended-for-most-users","title":"Option 2: HTTP Chain Loading (Recommended for Most Users)","text":"<p>This is the recommended approach - fast, reliable, and easy to set up.</p> <p>Create a tiny chain loader in TFTP that fetches your menu via HTTP:</p> <p>Create <code>/tftpboot/chain.ipxe</code>:</p> <pre><code>#!ipxe\n\n# Chain to elfshoe menu via HTTP (faster, more reliable than TFTP)\nchain http://192.168.1.10/elfshoe.ipxe || shell\n</code></pre> <p>Configure dnsmasq:</p> <pre><code>dhcp-boot=tag:ipxe,chain.ipxe\n</code></pre> <p>Pros: Fast HTTP delivery, small TFTP file, easy to update menu without touching TFTP Cons: Requires maintaining a small chain loader file</p> <p>Best for: Most production deployments</p>"},{"location":"server-setup/#option-3-embedded-script-best-for-production","title":"Option 3: Embedded Script (Best for Production)","text":"<p>This is the best approach for production deployments - no separate chain loader file needed.</p> <p>Embed the chain command directly into the iPXE bootloader when building from source:</p> <pre><code># Create embed script\necho \"#!ipxe\" &gt; embed.ipxe\necho \"chain http://192.168.1.10/elfshoe.ipxe\" &gt;&gt; embed.ipxe\n\n# Build iPXE with embedded script\ncd ipxe/src\nmake bin-x86_64-efi/ipxe.efi EMBED=embed.ipxe\n</code></pre> <p>This eliminates the need for a separate chain loader file.</p> <pre><code>#!ipxe\n\n# Set variables\nset server http://192.168.1.10\n\n# Chain to elfshoe-generated menu\nchain ${server}/elfshoe.ipxe || shell\n</code></pre>"},{"location":"server-setup/#firewall-configuration","title":"Firewall Configuration","text":"<p>Open required ports:</p> <pre><code># UFW (Ubuntu/Debian)\nsudo ufw allow 67/udp   # DHCP\nsudo ufw allow 69/udp   # TFTP\nsudo ufw allow 80/tcp   # HTTP\n\n# firewalld (RHEL/CentOS/Fedora)\nsudo firewall-cmd --permanent --add-service=dhcp\nsudo firewall-cmd --permanent --add-service=tftp\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --reload\n\n# iptables\nsudo iptables -A INPUT -p udp --dport 67 -j ACCEPT\nsudo iptables -A INPUT -p udp --dport 69 -j ACCEPT\nsudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT\n</code></pre>"},{"location":"server-setup/#testing-your-setup","title":"Testing Your Setup","text":""},{"location":"server-setup/#1-test-tftp-server","title":"1. Test TFTP Server","text":"<pre><code># From another machine\ntftp 192.168.1.10\ntftp&gt; get ipxe.efi\ntftp&gt; quit\n\n# Verify file was downloaded\nls -lh ipxe.efi\n</code></pre>"},{"location":"server-setup/#2-test-http-server","title":"2. Test HTTP Server","text":"<pre><code>curl http://192.168.1.10/elfshoe.ipxe\n</code></pre> <p>Should return your elfshoe-generated menu.</p>"},{"location":"server-setup/#3-test-pxe-boot","title":"3. Test PXE Boot","text":"<ol> <li>Boot a VM or physical machine with network boot enabled</li> <li>Watch the boot process:</li> <li>Client gets IP from DHCP</li> <li>Downloads <code>ipxe.efi</code> or <code>ipxe.pxe</code> via TFTP</li> <li>iPXE loads and fetches <code>elfshoe.ipxe</code> via HTTP</li> <li>Your elfshoe menu appears</li> </ol>"},{"location":"server-setup/#4-debug-with-ipxe-shell","title":"4. Debug with iPXE Shell","text":"<p>If boot fails, press Ctrl+B to enter iPXE shell:</p> <pre><code># Check network configuration\ndhcp\nifstat\n\n# Test TFTP\ntftp://192.168.1.10/ipxe.efi\n\n# Test HTTP\nhttp://192.168.1.10/elfshoe.ipxe\n\n# Manual chain\nchain http://192.168.1.10/elfshoe.ipxe\n</code></pre>"},{"location":"server-setup/#complete-workflow","title":"Complete Workflow","text":"<ol> <li>Setup infrastructure:</li> <li>Install DHCP + TFTP (dnsmasq or separate)</li> <li>Install HTTP server (nginx/apache)</li> <li> <p>Download iPXE boot files</p> </li> <li> <p>Generate menu with elfshoe: <pre><code>elfshoe -c config.yaml -o elfshoe.ipxe\n</code></pre></p> </li> <li> <p>Deploy menu: <pre><code>sudo cp elfshoe.ipxe /var/www/pxe/\n</code></pre></p> </li> <li> <p>Boot clients:</p> </li> <li>Enable network boot in BIOS/UEFI</li> <li>Boot and select your OS</li> </ol>"},{"location":"server-setup/#security-considerations","title":"Security Considerations","text":""},{"location":"server-setup/#production-checklist","title":"Production Checklist","text":"<ul> <li>[ ] Use HTTPS for menu delivery (requires iPXE with HTTPS support)</li> <li>[ ] Implement network segmentation for PXE traffic</li> <li>[ ] Restrict TFTP/HTTP access to boot VLAN only</li> <li>[ ] Use read-only TFTP directory permissions</li> <li>[ ] Enable DHCP snooping on managed switches</li> <li>[ ] Verify integrity of iPXE boot files (checksums)</li> <li>[ ] Monitor DHCP/TFTP logs for anomalies</li> </ul>"},{"location":"server-setup/#https-setup-optional","title":"HTTPS Setup (Optional)","text":"<p>Build iPXE with HTTPS support:</p> <pre><code>cd ipxe/src\nmake bin-x86_64-efi/ipxe.efi EMBED=script.ipxe TRUST=/path/to/ca-cert.crt\n</code></pre> <p>Then configure nginx with SSL for serving <code>elfshoe.ipxe</code>.</p>"},{"location":"server-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"server-setup/#client-gets-ip-but-doesnt-boot","title":"Client gets IP but doesn't boot","text":"<ul> <li>Check DHCP next-server and filename options</li> <li>Verify TFTP server is running: <code>sudo systemctl status tftpd-hpa</code></li> <li>Check firewall allows UDP port 69</li> </ul>"},{"location":"server-setup/#client-boots-ipxe-but-no-menu-appears","title":"Client boots iPXE but no menu appears","text":"<ul> <li>Verify HTTP server is accessible from client network</li> <li>Check <code>/var/www/pxe/elfshoe.ipxe</code> exists and is readable</li> <li>Test with <code>curl http://server-ip/elfshoe.ipxe</code></li> </ul>"},{"location":"server-setup/#mixed-biosuefi-environment-issues","title":"Mixed BIOS/UEFI environment issues","text":"<ul> <li>Ensure DHCP serves correct boot file per architecture</li> <li>BIOS needs <code>ipxe.pxe</code>, UEFI needs <code>ipxe.efi</code></li> <li>Check client architecture detection in DHCP logs</li> </ul>"},{"location":"server-setup/#references","title":"References","text":"<ul> <li>iPXE Project: https://ipxe.org/</li> <li>iPXE Documentation: https://ipxe.org/docs</li> <li>iPXE Downloads: https://boot.ipxe.org/</li> <li>iPXE Scripting: https://ipxe.org/scripting</li> <li>dnsmasq Documentation: http://www.thekelleys.org.uk/dnsmasq/doc.html</li> </ul>"},{"location":"server-setup/#related-documentation","title":"Related Documentation","text":"<ul> <li>Getting Started - Using elfshoe to generate menus</li> <li>Reference - elfshoe command and configuration reference</li> </ul>"},{"location":"developer/adding_distributions/","title":"Adding New Distribution Support","text":"<p>This guide explains how to add support for new operating systems and distributions.</p>"},{"location":"developer/adding_distributions/#quick-start","title":"Quick Start","text":"<p>To add a new distribution, you have two options:</p>"},{"location":"developer/adding_distributions/#option-1-static-distribution-simple","title":"Option 1: Static Distribution (Simple)","text":"<p>Use this when you have a fixed list of versions. Just add to <code>config.yaml</code>:</p> <pre><code>distributions:\n  your_distro:\n    enabled: true\n    label: \"Your Distribution\"\n    type: \"static\"\n    versions:\n      - version: \"1.0\"\n        label: \"Your Distro 1.0\"\n    url_template: \"http://mirror.example.com/{version}/os\"\n    boot_files:\n      kernel: \"vmlinuz\"\n      initrd: \"initrd.img\"\n    boot_params: \"\"\n</code></pre> <p>No Python code needed!</p>"},{"location":"developer/adding_distributions/#option-2-dynamic-distribution-advanced","title":"Option 2: Dynamic Distribution (Advanced)","text":"<p>Use this when you want to automatically fetch available versions from a metadata source.</p> <p>Step 1: Create <code>src/elfshoe/distributions/yourdistro.py</code>:</p> <pre><code>\"\"\"Your Distribution metadata fetcher.\"\"\"\n\nimport json\nimport sys\nimport urllib.request\nfrom typing import List\n\nfrom .base import AbstractMetadataFetcher\n\n\nclass YourDistroMetadataFetcher(AbstractMetadataFetcher):\n    \"\"\"Fetches version information for Your Distribution.\"\"\"\"\"\n\n    def fetch_versions(self, metadata_url: str, **filters) -&gt; List[str]:\n        \"\"\"Fetch versions from metadata source.\n\n        Args:\n            metadata_url: URL to fetch metadata from\n            **filters: Custom filters (e.g., variant, arch)\n\n        Returns:\n            List of version strings, sorted appropriately\n        \"\"\"\n        try:\n            with urllib.request.urlopen(metadata_url, timeout=10) as response:\n                data = json.loads(response.read().decode())\n        except Exception as e:\n            print(f\"  \u2717 Failed to fetch metadata: {e}\", file=sys.stderr)\n            return []\n\n        # Parse your metadata format\n        versions = []\n        for release in data:\n            # Extract version based on your metadata structure\n            versions.append(release['version'])\n\n        # Sort appropriately for your distribution\n        return sorted(versions, reverse=True)\n</code></pre> <p>Step 2: Register in <code>src/elfshoe/distributions/__init__.py</code>:</p> <pre><code>from .yourdistro import YourDistroMetadataFetcher\n\nMETADATA_PROVIDERS = {\n    'fedora': FedoraMetadataFetcher,\n    'yourdistro': YourDistroMetadataFetcher,  # Add this line\n}\n</code></pre> <p>Step 3: Add to <code>config.yaml</code>:</p> <pre><code>distributions:\n  your_distro:\n    enabled: true\n    label: \"Your Distribution\"\n    type: \"dynamic\"\n    metadata_provider: \"yourdistro\"  # Must match registry key\n    metadata_url: \"http://example.com/metadata.json\"\n    metadata_filter:  # Optional, passed to fetch_versions()\n      arch: \"x86_64\"\n    url_template: \"http://mirror.example.com/{version}/os\"\n    boot_files:\n      kernel: \"vmlinuz\"\n      initrd: \"initrd.img\"\n    boot_params: \"\"\n</code></pre>"},{"location":"developer/adding_distributions/#real-world-examples","title":"Real-World Examples","text":""},{"location":"developer/adding_distributions/#windows-pe-static","title":"Windows PE (Static)","text":"<pre><code>distributions:\n  windows_pe:\n    enabled: true\n    label: \"Windows PE\"\n    type: \"static\"\n    versions:\n      - version: \"11\"\n        label: \"Windows 11 PE\"\n      - version: \"10\"\n        label: \"Windows 10 PE\"\n    url_template: \"http://your-server.local/winpe/{version}\"\n    boot_files:\n      kernel: \"wimboot\"\n      initrd: \"boot.wim\"\n    boot_params: \"\"\n</code></pre>"},{"location":"developer/adding_distributions/#freebsd-dynamic","title":"FreeBSD (Dynamic)","text":"<p>Create <code>src/distributions/freebsd.py</code>:</p> <pre><code>\"\"\"FreeBSD metadata fetcher.\"\"\"\n\nimport re\nimport sys\nimport urllib.request\nfrom typing import List\n\nfrom .base import AbstractMetadataFetcher\n\n\nclass FreeBSDMetadataFetcher(AbstractMetadataFetcher):\n    \"\"\"Fetches FreeBSD release information.\"\"\"\n\n    def fetch_versions(self, metadata_url: str, **filters) -&gt; List[str]:\n        \"\"\"Fetch FreeBSD versions from FTP directory listing.\"\"\"\n        try:\n            with urllib.request.urlopen(metadata_url, timeout=10) as response:\n                html = response.read().decode()\n        except Exception as e:\n            print(f\"  \u2717 Failed to fetch FreeBSD metadata: {e}\", file=sys.stderr)\n            return []\n\n        # Parse FTP directory listing for release versions\n        versions = []\n        for match in re.finditer(r'(\\d+\\.\\d+)-RELEASE', html):\n            versions.append(match.group(1))\n\n        # Sort by version number, newest first\n        return sorted(set(versions), key=lambda v: tuple(map(int, v.split('.'))), \n                     reverse=True)\n</code></pre> <p>Then configure:</p> <pre><code>distributions:\n  freebsd:\n    enabled: true\n    label: \"FreeBSD\"\n    type: \"dynamic\"\n    metadata_provider: \"freebsd\"\n    metadata_url: \"http://ftp.freebsd.org/pub/FreeBSD/releases/amd64/amd64/\"\n    url_template: \"http://ftp.freebsd.org/pub/FreeBSD/releases/amd64/amd64/{version}-RELEASE\"\n    boot_files:\n      kernel: \"kernel.txz\"\n      initrd: \"base.txz\"\n    boot_params: \"\"\n</code></pre>"},{"location":"developer/adding_distributions/#testing-your-distribution","title":"Testing Your Distribution","text":"<ol> <li>Test with validation disabled (fast iteration):</li> </ol> <pre><code>make fast\n# or\npython3 -m elfshoe --no-validate\n</code></pre> <ol> <li>Test with URL validation (verify files exist):</li> </ol> <pre><code>make validate\n# or\npython3 -m elfshoe\n</code></pre> <ol> <li>Write unit tests in <code>tests/test_distributions.py</code>:</li> </ol> <pre><code>from elfshoe.distributions import YourDistroMetadataFetcher\n\ndef test_fetch_versions():\n    fetcher = YourDistroMetadataFetcher()\n    versions = fetcher.fetch_versions(\"http://example.com/metadata.json\")\n    assert len(versions) &gt; 0\n    assert all(isinstance(v, str) for v in versions)\n</code></pre>"},{"location":"developer/adding_distributions/#architecture-overview","title":"Architecture Overview","text":"<pre><code>src/\n\u2514\u2500\u2500 elfshoe/            # Main package\n    \u251c\u2500\u2500 cli.py                # Command-line interface\n    \u251c\u2500\u2500 builder.py            # DistributionBuilder - orchestration\n    \u251c\u2500\u2500 core/\n    \u2502   \u251c\u2500\u2500 models.py         # BootEntry, DistributionMenu\n    \u2502   \u251c\u2500\u2500 validator.py      # URL validation\n    \u2502   \u2514\u2500\u2500 generator.py      # Jinja2 menu generation\n    \u2514\u2500\u2500 distributions/\n        \u251c\u2500\u2500 base.py           # AbstractMetadataFetcher (interface)\n        \u251c\u2500\u2500 __init__.py       # Registry (METADATA_PROVIDERS)\n        \u251c\u2500\u2500 fedora.py         # Fedora implementation\n        \u2514\u2500\u2500 yourdistro.py     # Your implementation\n</code></pre>"},{"location":"developer/adding_distributions/#best-practices","title":"Best Practices","text":"<ol> <li>Error Handling: Always catch exceptions when fetching metadata</li> <li>Timeouts: Use reasonable timeouts (10 seconds) for network requests</li> <li>Sorting: Sort versions appropriately (newest first for most distros)</li> <li>Filtering: Support optional filters via <code>**filters</code> parameter</li> <li>Testing: Test with both real and mock metadata sources</li> </ol>"},{"location":"developer/adding_distributions/#need-help","title":"Need Help?","text":"<ul> <li>Look at <code>src/distributions/fedora.py</code> for a complete example</li> <li>Check existing distribution configs in <code>config.yaml</code></li> <li>Run tests: <code>make test</code></li> <li>Ask in issues/discussions</li> </ul>"},{"location":"developer/architecture/","title":"Architecture Documentation","text":""},{"location":"developer/architecture/#overview","title":"Overview","text":"<p>The elfshoe uses a modular, plugin-based architecture that separates concerns and makes it easy to extend with new distributions.</p>"},{"location":"developer/architecture/#directory-structure","title":"Directory Structure","text":"<pre><code>ipxe/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 elfshoe/                # Main package\n\u2502       \u251c\u2500\u2500 __init__.py               # Package exports\n\u2502       \u251c\u2500\u2500 __main__.py               # Module entry point (python -m)\n\u2502       \u251c\u2500\u2500 cli.py                    # Command-line interface\n\u2502       \u251c\u2500\u2500 builder.py                # DistributionBuilder class\n\u2502       \u251c\u2500\u2500 core/                     # Core functionality\n\u2502       \u2502   \u251c\u2500\u2500 __init__.py           # Package exports\n\u2502       \u2502   \u251c\u2500\u2500 models.py             # Data models (BootEntry, DistributionMenu)\n\u2502       \u2502   \u251c\u2500\u2500 validator.py          # URL validation\n\u2502       \u2502   \u2514\u2500\u2500 generator.py          # Jinja2 menu generation\n\u2502       \u251c\u2500\u2500 distributions/            # Distribution-specific modules\n\u2502       \u2502   \u251c\u2500\u2500 __init__.py           # Provider registry\n\u2502       \u2502   \u251c\u2500\u2500 base.py               # AbstractMetadataFetcher interface\n\u2502       \u2502   \u251c\u2500\u2500 fedora.py             # Fedora implementation\n\u2502       \u2502   \u2514\u2500\u2500 [future: centos.py, debian.py, windows.py, ...]\n\u2502       \u2514\u2500\u2500 templates/                # Jinja2 templates\n\u2502           \u251c\u2500\u2500 main_elfshoe.ipxe.j2\n\u2502           \u251c\u2500\u2500 distribution_submenus.ipxe.j2\n\u2502           \u2514\u2500\u2500 additional_items.ipxe.j2\n\u251c\u2500\u2500 tests/                            # Test suite\n\u2502   \u251c\u2500\u2500 conftest.py                   # Pytest fixtures\n\u2502   \u251c\u2500\u2500 test_elfshoe.py        # Model tests\n\u2502   \u251c\u2500\u2500 test_url_validator.py        # Validation tests\n\u2502   \u2514\u2500\u2500 test_menu_generator.py        # Generation tests\n\u251c\u2500\u2500 config.yaml                       # Main configuration\n\u2514\u2500\u2500 elfshoe.ipxe                         # Generated output\n</code></pre>"},{"location":"developer/architecture/#key-components","title":"Key Components","text":""},{"location":"developer/architecture/#1-core-package-srccore","title":"1. Core Package (<code>src/core/</code>)","text":"<p>Purpose: Provides reusable components independent of specific distributions.</p>"},{"location":"developer/architecture/#modelspy","title":"<code>models.py</code>","text":"<ul> <li><code>BootEntry</code>: Dataclass representing a single boot option</li> <li><code>DistributionMenu</code>: Dataclass representing a distribution submenu</li> </ul>"},{"location":"developer/architecture/#validatorpy","title":"<code>validator.py</code>","text":"<ul> <li><code>URLValidator</code>: Validates that boot files exist before including in menu</li> <li>Uses HEAD requests for efficiency</li> <li>Optional validation for faster iteration</li> </ul>"},{"location":"developer/architecture/#generatorpy","title":"<code>generator.py</code>","text":"<ul> <li><code>MenuGenerator</code>: Renders iPXE menus using Jinja2 templates</li> <li>Separates presentation logic from business logic</li> <li>Template path configurable for customization</li> </ul>"},{"location":"developer/architecture/#2-distributions-package-srcdistributions","title":"2. Distributions Package (<code>src/distributions/</code>)","text":"<p>Purpose: Pluggable system for distribution-specific metadata fetching.</p>"},{"location":"developer/architecture/#basepy","title":"<code>base.py</code>","text":"<ul> <li><code>AbstractMetadataFetcher</code>: Interface that all fetchers must implement</li> <li>Single method: <code>fetch_versions(metadata_url, **filters) -&gt; List[str]</code></li> </ul>"},{"location":"developer/architecture/#provider-implementations","title":"Provider Implementations","text":"<ul> <li>Each distribution gets its own module (e.g., <code>fedora.py</code>)</li> <li>Implements metadata fetching logic specific to that distribution</li> <li>Returns sorted list of available versions</li> </ul>"},{"location":"developer/architecture/#registry-distributions__init__py","title":"Registry (<code>distributions/__init__.py</code>)","text":"<pre><code>METADATA_PROVIDERS = {\n    'fedora': FedoraMetadataFetcher,\n    # Add more providers here\n}\n</code></pre>"},{"location":"developer/architecture/#3-command-line-interface-clipy","title":"3. Command-Line Interface (<code>cli.py</code>)","text":"<p>Purpose: CLI orchestration and argument parsing.</p>"},{"location":"developer/architecture/#main-function","title":"<code>main()</code> function","text":"<ul> <li>Parses command-line arguments</li> <li>Loads configuration from YAML</li> <li>Orchestrates builder and generator</li> <li>Handles verbose/quiet output</li> </ul>"},{"location":"developer/architecture/#4-distribution-builder-builderpy","title":"4. Distribution Builder (<code>builder.py</code>)","text":"<p>Purpose: Builds distribution menus from configuration.</p>"},{"location":"developer/architecture/#distributionbuilder-class","title":"<code>DistributionBuilder</code> class","text":"<ul> <li>Builds distribution menus from configuration</li> <li>Supports two types:</li> <li>Static: Fixed version list from config</li> <li>Dynamic: Fetches versions from metadata provider</li> <li>Handles URL validation</li> <li>Manages verbose/quiet output</li> </ul>"},{"location":"developer/architecture/#data-flow","title":"Data Flow","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 config.yaml \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 cli.py               \u2502\n\u2502  - Loads config      \u2502\n\u2502  - Creates Builder   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 DistributionBuilder              \u2502\n\u2502  - For each distribution:        \u2502\n\u2502    \u2022 Static \u2192 use config versions\u2502\n\u2502    \u2022 Dynamic \u2192 fetch metadata    \u2502\n\u2502  - Validates URLs (optional)     \u2502\n\u2502  - Creates BootEntry objects     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u251c\u2500[dynamic]\u2500\u2500\u2510\n       \u2502            \u25bc\n       \u2502    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n       \u2502    \u2502 MetadataFetcher        \u2502\n       \u2502    \u2502  - Fetch from source   \u2502\n       \u2502    \u2502  - Parse format        \u2502\n       \u2502    \u2502  - Return versions     \u2502\n       \u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502             \u2502\n       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 MenuGenerator        \u2502\n\u2502  - Renders templates \u2502\n\u2502  - Combines sections \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  elfshoe.ipxe   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"developer/architecture/#plugin-system","title":"Plugin System","text":""},{"location":"developer/architecture/#how-distribution-plugins-work","title":"How Distribution Plugins Work","text":"<ol> <li>Implement the Interface: Create a class inheriting from <code>AbstractMetadataFetcher</code></li> <li>Register: Add to <code>METADATA_PROVIDERS</code> dictionary</li> <li>Configure: Reference in <code>config.yaml</code> with <code>metadata_provider: \"name\"</code></li> </ol>"},{"location":"developer/architecture/#example-adding-windows-support","title":"Example: Adding Windows Support","text":"<p>Step 1: Create <code>src/distributions/windows.py</code></p> <pre><code>from .base import AbstractMetadataFetcher\n\nclass WindowsMetadataFetcher(AbstractMetadataFetcher):\n    def fetch_versions(self, metadata_url, **filters):\n        # Implement Windows-specific logic\n        return ['11', '10', '7']\n</code></pre> <p>Step 2: Register in <code>src/distributions/__init__.py</code></p> <pre><code>from .windows import WindowsMetadataFetcher\n\nMETADATA_PROVIDERS = {\n    'fedora': FedoraMetadataFetcher,\n    'windows': WindowsMetadataFetcher,  # Add this\n}\n</code></pre> <p>Step 3: Use in <code>config.yaml</code></p> <pre><code>distributions:\n  windows:\n    type: \"dynamic\"\n    metadata_provider: \"windows\"\n    metadata_url: \"http://your-server/windows-versions.json\"\n    # ... rest of config\n</code></pre>"},{"location":"developer/architecture/#design-principles","title":"Design Principles","text":""},{"location":"developer/architecture/#separation-of-concerns","title":"Separation of Concerns","text":"<ul> <li>Core: Reusable, distribution-agnostic</li> <li>Distributions: Specific to each OS/distro</li> <li>Templates: Presentation logic only</li> <li>Main: Orchestration and CLI</li> </ul>"},{"location":"developer/architecture/#openclosed-principle","title":"Open/Closed Principle","text":"<ul> <li>Open for extension: Add new distributions without modifying existing code</li> <li>Closed for modification: Core components rarely change</li> </ul>"},{"location":"developer/architecture/#dependency-inversion","title":"Dependency Inversion","text":"<ul> <li>Core depends on abstractions (<code>AbstractMetadataFetcher</code>)</li> <li>Specific implementations depend on same abstractions</li> <li>No dependency on concrete implementations</li> </ul>"},{"location":"developer/architecture/#configuration-over-code","title":"Configuration Over Code","text":"<ul> <li>Everything configurable via YAML</li> <li>No Python changes needed for new static distributions</li> <li>Templates customizable without code changes</li> </ul>"},{"location":"developer/architecture/#testing-strategy","title":"Testing Strategy","text":""},{"location":"developer/architecture/#unit-tests","title":"Unit Tests","text":"<ul> <li><code>test_elfshoe.py</code>: Test data models</li> <li><code>test_url_validator.py</code>: Test URL validation (mocked)</li> <li><code>test_menu_generator.py</code>: Test menu generation</li> </ul>"},{"location":"developer/architecture/#integration-tests","title":"Integration Tests","text":"<ul> <li>Run with <code>--no-validate</code> for fast testing</li> <li>Run with validation for complete testing</li> <li>Mock HTTP requests to avoid network dependencies</li> </ul>"},{"location":"developer/architecture/#manual-testing","title":"Manual Testing","text":"<pre><code># Fast iteration (no network calls)\nmake fast\n\n# Full validation\nmake validate\n\n# Custom config\npython3 -m elfshoe -c custom.yaml\n</code></pre>"},{"location":"developer/architecture/#extension-points","title":"Extension Points","text":""},{"location":"developer/architecture/#add-new-distribution","title":"Add New Distribution","text":"<p>See <code>ADDING_DISTRIBUTIONS.md</code> for detailed guide.</p>"},{"location":"developer/architecture/#custom-templates","title":"Custom Templates","text":"<ol> <li>Copy <code>src/templates/</code> to custom location</li> <li>Modify templates as needed</li> <li>Use with <code>MenuGenerator(config, template_dir=custom_path)</code></li> </ol>"},{"location":"developer/architecture/#custom-validation","title":"Custom Validation","text":"<p>Extend <code>URLValidator</code> class or implement custom validator.</p>"},{"location":"developer/architecture/#additional-boot-types","title":"Additional Boot Types","text":"<p>Modify templates to add new boot types beyond chain/shell/exit.</p>"},{"location":"developer/architecture/#performance-considerations","title":"Performance Considerations","text":""},{"location":"developer/architecture/#url-validation","title":"URL Validation","text":"<ul> <li>Most expensive operation (network I/O)</li> <li>Use <code>--no-validate</code> during development</li> <li>Validation runs in serial (could be parallelized in future)</li> </ul>"},{"location":"developer/architecture/#metadata-fetching","title":"Metadata Fetching","text":"<ul> <li>Cached by default (reuse connection)</li> <li>Timeout: 10 seconds</li> <li>Could add persistent caching in future</li> </ul>"},{"location":"developer/architecture/#template-rendering","title":"Template Rendering","text":"<ul> <li>Negligible overhead</li> <li>Pre-compiled by Jinja2</li> <li>Happens once per invocation</li> </ul>"},{"location":"developer/architecture/#future-enhancements","title":"Future Enhancements","text":""},{"location":"developer/architecture/#potential-improvements","title":"Potential Improvements","text":"<ol> <li>Parallel URL Validation: Use asyncio or threading for faster validation</li> <li>Metadata Caching: Cache API responses locally to reduce network calls</li> <li>Auto-Discovery: Automatically scan <code>distributions/</code> directory for plugins instead of manual registry (currently requires manual registration in <code>__init__.py</code>)</li> <li>Configuration Validation: Use JSON Schema to validate config.yaml structure</li> <li>More Providers: CentOS, Debian, Ubuntu, Windows, BSD metadata fetchers</li> <li>Multi-Architecture: ARM, aarch64 support in addition to x86_64</li> <li>CI/CD Integration: GitHub Actions workflow examples</li> <li>Web UI: Optional web interface for configuration management</li> </ol>"},{"location":"developer/architecture/#backward-compatibility","title":"Backward Compatibility","text":"<ul> <li>Configuration format is stable</li> <li>Core API unlikely to change</li> <li>New providers don't affect existing ones</li> </ul>"},{"location":"developer/architecture/#migration-notes","title":"Migration Notes","text":""},{"location":"developer/architecture/#from-old-architecture","title":"From Old Architecture","text":"<p>The refactoring (February 2026) moved from a monolithic design to modular:</p> <p>Before (monolithic file):</p> <ul> <li>All code in single <code>elfshoe.py</code> file (401 lines)</li> <li><code>FedoraMetadataFetcher</code> hardcoded</li> <li>String check for 'fedoraproject.org'</li> </ul> <p>After (modular):</p> <ul> <li>Core: Data models, validation, generation</li> <li>Distributions: Plugin system for metadata fetching</li> <li>CLI: User interface and orchestration</li> <li>Easier to test, extend, and maintain</li> </ul>"},{"location":"developer/architecture/#breaking-changes","title":"Breaking Changes","text":"<ul> <li>Import paths changed:</li> <li><code>from elfshoe import BootEntry</code> \u2192 <code>from core import BootEntry</code></li> <li><code>from elfshoe import URLValidator</code> \u2192 <code>from core import URLValidator</code></li> <li>Config requires <code>metadata_provider</code> field for dynamic distributions</li> <li>Tests updated to use new imports</li> </ul>"},{"location":"developer/architecture/#non-breaking-changes","title":"Non-Breaking Changes","text":"<ul> <li>CLI interface unchanged</li> <li>Configuration format mostly unchanged (only <code>metadata_provider</code> added)</li> <li>Template format unchanged</li> <li>Generated elfshoe.ipxe format unchanged</li> </ul>"},{"location":"developer/contributing/","title":"Contributing","text":""},{"location":"developer/contributing/#contributing-to-elfshoe","title":"Contributing to elfshoe","text":"<p>Thank you for your interest in contributing to elfshoe! This document provides guidelines and instructions for contributing.</p>"},{"location":"developer/contributing/#how-to-contribute","title":"\ud83c\udfaf How to Contribute","text":""},{"location":"developer/contributing/#reporting-bugs","title":"Reporting Bugs","text":"<ol> <li>Check if the bug has already been reported in Issues</li> <li>If not, create a new issue with:</li> <li>Clear, descriptive title</li> <li>Detailed description of the problem</li> <li>Steps to reproduce</li> <li>Expected vs actual behavior</li> <li>Your environment (OS, Python version, package versions)</li> <li>Relevant logs or error messages</li> </ol>"},{"location":"developer/contributing/#suggesting-enhancements","title":"Suggesting Enhancements","text":"<ol> <li>Check existing Issues and Pull Requests</li> <li>Create a new issue describing:</li> <li>The enhancement you'd like to see</li> <li>Why it would be useful</li> <li>Possible implementation approaches</li> </ol>"},{"location":"developer/contributing/#pull-requests","title":"Pull Requests","text":"<ol> <li>Fork the repository</li> <li>Clone your fork locally</li> <li>Create a branch for your changes:</li> </ol> <pre><code>git checkout -b feature/my-new-feature\n</code></pre> <ol> <li>Make your changes following our guidelines below</li> <li>Test your changes thoroughly</li> <li>Commit with clear, descriptive messages</li> <li>Push to your fork</li> <li>Submit a pull request to the main repository</li> </ol>"},{"location":"developer/contributing/#development-setup","title":"\ud83d\udee0\ufe0f Development Setup","text":""},{"location":"developer/contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.7 or higher</li> <li>Git</li> <li>Make (optional, but recommended)</li> </ul>"},{"location":"developer/contributing/#initial-setup","title":"Initial Setup","text":"<pre><code># Clone your fork\ngit clone https://github.com/YOUR_USERNAME/elfshoe.git\ncd elfshoe\n\n# Install Hatch\npip install hatch\n\n# Create development environment\nhatch env create\n\n# Or use editable install\npip install -e \".[dev]\"\n</code></pre>"},{"location":"developer/contributing/#running-tests","title":"Running Tests","text":"<pre><code># Run all tests\nmake test\n\n# Run with coverage\nmake test-coverage\n\n# Run specific test file\npytest tests/test_elfshoe.py\n\n# Using hatch\nhatch run test\nhatch run test-cov\n</code></pre>"},{"location":"developer/contributing/#code-quality","title":"Code Quality","text":"<pre><code># Check code style\nmake lint\n\n# Auto-format code\nmake format\n\n# Or with hatch\nhatch run lint:check\nhatch run lint:format\n</code></pre>"},{"location":"developer/contributing/#code-guidelines","title":"\ud83d\udcdd Code Guidelines","text":""},{"location":"developer/contributing/#style-guide","title":"Style Guide","text":"<ul> <li>Follow PEP 8 style guidelines</li> <li>Use Black for formatting (line length: 88)</li> <li>Use Ruff for linting</li> <li>Write clear, descriptive variable and function names</li> <li>Add docstrings for public functions and classes</li> </ul>"},{"location":"developer/contributing/#code-structure","title":"Code Structure","text":"<ul> <li>Keep functions focused and single-purpose</li> <li>Use type hints where appropriate</li> <li>Avoid deep nesting (max 3-4 levels)</li> <li>Extract complex logic into separate functions</li> <li>Use dataclasses for data structures</li> </ul>"},{"location":"developer/contributing/#testing","title":"Testing","text":"<ul> <li>Write tests for all new features</li> <li>Maintain or improve test coverage</li> <li>Test both success and failure cases</li> <li>Use descriptive test names that explain what is being tested</li> <li>Group related tests in test classes</li> </ul>"},{"location":"developer/contributing/#documentation","title":"Documentation","text":"<ul> <li>Update relevant documentation for your changes</li> <li>Add docstrings for new functions/classes</li> <li>Update README.md if adding user-facing features</li> <li>Include code examples for new features</li> </ul>"},{"location":"developer/contributing/#adding-new-distributions","title":"\ud83d\udd0c Adding New Distributions","text":"<p>See adding_distributions.md for detailed instructions on adding support for new operating systems.</p>"},{"location":"developer/contributing/#quick-checklist","title":"Quick Checklist","text":"<ol> <li>Create a metadata fetcher class in <code>src/elfshoe/distributions/</code></li> <li>Inherit from <code>AbstractMetadataFetcher</code></li> <li>Implement <code>fetch_versions()</code> method</li> <li>Register in <code>src/elfshoe/distributions/__init__.py</code></li> <li>Add tests in <code>tests/</code></li> <li>Update documentation</li> <li>Add example configuration to README</li> </ol>"},{"location":"developer/contributing/#testing-checklist","title":"\ud83e\uddea Testing Checklist","text":"<p>Before submitting a pull request, ensure:</p> <ul> <li>[ ] All tests pass (<code>make test</code>)</li> <li>[ ] Code is formatted (<code>make format</code>)</li> <li>[ ] Linting passes (<code>make lint</code>)</li> <li>[ ] Coverage hasn't decreased (<code>make test-coverage</code>)</li> <li>[ ] Documentation is updated</li> <li>[ ] New features have tests</li> <li>[ ] Examples work as documented</li> </ul>"},{"location":"developer/contributing/#commit-messages","title":"\ud83d\udccb Commit Messages","text":"<p>Write clear, descriptive commit messages:</p> <pre><code>feat: Add support for Ubuntu metadata fetcher\n\n- Implement UbuntuMetadataFetcher class\n- Add tests for Ubuntu version detection\n- Update documentation with Ubuntu example\n</code></pre>"},{"location":"developer/contributing/#commit-message-format","title":"Commit Message Format","text":"<pre><code>&lt;type&gt;: &lt;subject&gt;\n\n&lt;body&gt;\n\n&lt;footer&gt;\n</code></pre> <p>Types:</p> <ul> <li><code>feat</code>: New feature</li> <li><code>fix</code>: Bug fix</li> <li><code>docs</code>: Documentation changes</li> <li><code>test</code>: Adding or updating tests</li> <li><code>refactor</code>: Code refactoring</li> <li><code>style</code>: Code style changes (formatting)</li> <li><code>chore</code>: Maintenance tasks</li> </ul>"},{"location":"developer/contributing/#release-process","title":"\ud83d\ude80 Release Process","text":"<p>Releases are handled by maintainers:</p> <ol> <li>Update version in <code>pyproject.toml</code></li> <li>Create and tag release</li> <li>Build and publish to PyPI:</li> </ol> <pre><code>hatch build\nhatch publish\n</code></pre>"},{"location":"developer/contributing/#need-help","title":"\ud83d\udca1 Need Help?","text":"<ul> <li>Check the documentation</li> <li>Look at existing code for examples</li> <li>Review closed pull requests for similar changes</li> <li>Open an issue for questions</li> <li>Reach out to maintainers</li> </ul>"},{"location":"developer/contributing/#code-of-conduct","title":"\ud83d\udcdc Code of Conduct","text":"<ul> <li>Be respectful and inclusive</li> <li>Welcome newcomers</li> <li>Focus on constructive feedback</li> <li>Assume good intentions</li> <li>Help others learn and grow</li> </ul>"},{"location":"developer/contributing/#recognition","title":"\ud83c\udf89 Recognition","text":"<p>Contributors are recognized in:</p> <ul> <li>GitHub contributors list</li> <li>Project README (for major features)</li> </ul> <p>Thank you for contributing to elfshoe! \ud83d\ude4f</p>"},{"location":"developer/project_status/","title":"Project Status - elfshoe v2.0","text":""},{"location":"developer/project_status/#complete","title":"\u2705 Complete","text":""},{"location":"developer/project_status/#core-functionality","title":"Core Functionality","text":"<ul> <li>[x] Configuration-driven menu generation</li> <li>[x] Jinja2 templating system</li> <li>[x] URL validation with HEAD requests</li> <li>[x] Dynamic version detection (Fedora via metadata)</li> <li>[x] Static version lists (CentOS, Debian)</li> <li>[x] Error handling with configurable timeout</li> <li>[x] initrd loading before kernel chain</li> <li>[x] Modular plugin architecture</li> </ul>"},{"location":"developer/project_status/#architecture-v20","title":"Architecture (v2.0)","text":"<ul> <li>[x] Proper Python package structure (<code>src/elfshoe/</code>)</li> <li>[x] Modular design (core/, distributions/, templates/)</li> <li>[x] Plugin system with AbstractMetadataFetcher</li> <li>[x] Provider registry for metadata fetchers</li> <li>[x] Hatch build system</li> <li>[x] Modern pyproject.toml configuration</li> </ul>"},{"location":"developer/project_status/#project-structure","title":"Project Structure","text":"<ul> <li>[x] Comprehensive test suite (11 tests, 32% coverage)</li> <li>[x] Pytest with pythonpath configuration</li> <li>[x] Hatch environments (default, lint)</li> <li>[x] Self-documenting Makefile</li> <li>[x] Complete documentation (8 files)</li> <li>[x] README.md (user guide)</li> <li>[x] TESTING.md (test guide)</li> <li>[x] QUICKREF.md (quick reference)</li> <li>[x] OVERVIEW.md (architecture overview)</li> <li>[x] ARCHITECTURE.md (detailed design)</li> <li>[x] ADDING_DISTRIBUTIONS.md (extension guide)</li> <li>[x] PROJECT_STATUS.md (this file)</li> </ul>"},{"location":"developer/project_status/#code-quality","title":"Code Quality","text":"<ul> <li>[x] Modular architecture (~600 lines across modules)</li> <li>[x] Separated concerns (core vs distribution-specific)</li> <li>[x] Type hints with dataclasses</li> <li>[x] Comprehensive docstrings</li> <li>[x] Ruff linting (all checks passing)</li> <li>[x] Black formatting (consistent style)</li> </ul>"},{"location":"developer/project_status/#metrics","title":"\ud83d\udcca Metrics","text":"Metric Value Package Files 18 (in wheel) Source Lines ~600 (across modules) Test Coverage 32% Tests 11 passing Core Dependencies 2 (pyyaml, jinja2) Dev Dependencies 5 (pytest, black, ruff, etc.) Documentation Files 8 Template Files 3 Python Modules 11"},{"location":"developer/project_status/#usage-methods","title":"\ud83c\udfaf Usage Methods","text":""},{"location":"developer/project_status/#development-local","title":"Development (Local)","text":"<pre><code># Fast iteration\npytest                     # Run tests\nmake fast                  # Generate menu (no validation)\nmake lint                  # Check code style\n\n# With hatch\nhatch run test             # Run in isolated environment\nhatch run lint:check       # Lint code\n</code></pre>"},{"location":"developer/project_status/#production-installed","title":"Production (Installed)","text":"<pre><code># Install package\npip install elfshoeerator\n\n# Use command\nelfshoe              # Generate menu\nelfshoe --help       # Show options\n</code></pre>"},{"location":"developer/project_status/#cicd","title":"CI/CD","text":"<pre><code># Hatch provides isolated, reproducible builds\nhatch run test             # Test in clean environment\nhatch run lint:check       # Lint\nhatch build                # Build wheel + sdist\nhatch publish              # Publish to PyPI\n</code></pre>"},{"location":"developer/project_status/#architecture-highlights","title":"\ud83c\udfd7\ufe0f Architecture Highlights","text":""},{"location":"developer/project_status/#package-structure","title":"Package Structure","text":"<pre><code>src/elfshoe/\n\u251c\u2500\u2500 __init__.py           # Package exports\n\u251c\u2500\u2500 __main__.py           # Module entry point\n\u251c\u2500\u2500 cli.py                # CLI\n\u251c\u2500\u2500 builder.py            # DistributionBuilder\n\u251c\u2500\u2500 core/                 # Core components\n\u2502   \u251c\u2500\u2500 models.py         # Data models\n\u2502   \u251c\u2500\u2500 validator.py      # URL validation\n\u2502   \u2514\u2500\u2500 generator.py      # Menu generation\n\u251c\u2500\u2500 distributions/        # Plugin system\n\u2502   \u251c\u2500\u2500 base.py           # Abstract interface\n\u2502   \u251c\u2500\u2500 fedora.py         # Fedora implementation\n\u2502   \u2514\u2500\u2500 __init__.py       # Provider registry\n\u2514\u2500\u2500 templates/            # Jinja2 templates\n</code></pre>"},{"location":"developer/project_status/#plugin-system","title":"Plugin System","text":"<ul> <li>AbstractMetadataFetcher: Base class for metadata fetchers</li> <li>Provider Registry: Dict of available fetchers</li> <li>Easy Extension: Drop in new module, register, configure</li> </ul>"},{"location":"developer/project_status/#build-system","title":"Build System","text":"<ul> <li>Hatch: Modern Python packaging</li> <li>Environments: Isolated dev/test/lint environments</li> <li>Scripts: Custom hatch scripts for common tasks</li> </ul>"},{"location":"developer/project_status/#improvement-over-v10","title":"\ud83d\udcc8 Improvement Over v1.0","text":""},{"location":"developer/project_status/#before-v10","title":"Before (v1.0)","text":"<ul> <li>Single 405-line file</li> <li>Setuptools build system</li> <li>Hardcoded Fedora metadata fetching</li> <li>sys.path hacks in tests</li> <li>PYTHONPATH required for tests</li> </ul>"},{"location":"developer/project_status/#after-v20","title":"After (v2.0)","text":"<ul> <li>Modular package (~600 lines across 11 modules)</li> <li>Hatch build system</li> <li>Plugin architecture for metadata fetchers</li> <li>Clean imports in tests</li> <li>Pytest pythonpath configuration</li> </ul>"},{"location":"developer/project_status/#benefits","title":"Benefits","text":"<p>\u2705 Easier to extend: Add distributions without touching core \u2705 Better organized: Separation of concerns \u2705 More maintainable: Smaller, focused modules \u2705 Professional: Modern packaging standards \u2705 Testable: Clean imports, isolated environments</p>"},{"location":"developer/project_status/#future-enhancements-optional","title":"\ud83d\ude80 Future Enhancements (Optional)","text":""},{"location":"developer/project_status/#more-distribution-providers","title":"More Distribution Providers","text":"<ul> <li>[ ] CentOS metadata fetcher (dynamic)</li> <li>[ ] Debian metadata fetcher (dynamic)</li> <li>[ ] Ubuntu provider</li> <li>[ ] Windows PE provider</li> <li>[ ] FreeBSD provider</li> </ul>"},{"location":"developer/project_status/#testing-quality","title":"Testing &amp; Quality","text":"<ul> <li>[ ] Increase test coverage to 80%+</li> <li>[ ] Add integration tests</li> <li>[ ] Add performance benchmarks</li> <li>[ ] CI/CD pipeline (GitHub Actions)</li> </ul>"},{"location":"developer/project_status/#features","title":"Features","text":"<ul> <li>[ ] Multi-architecture support (ARM)</li> <li>[ ] Metadata caching</li> <li>[ ] Configuration validation (JSON Schema)</li> <li>[ ] Web UI for configuration</li> <li>[ ] Auto-discovery of plugins</li> </ul>"},{"location":"developer/project_status/#documentation","title":"Documentation","text":"<ul> <li>[ ] API documentation (Sphinx)</li> <li>[ ] Video tutorials</li> <li>[ ] More examples</li> <li>[ ] Contributor guide</li> </ul>"},{"location":"developer/project_status/#distribution","title":"\ud83d\udce6 Distribution","text":""},{"location":"developer/project_status/#pypi-ready","title":"PyPI Ready","text":"<ul> <li>[x] Proper package structure</li> <li>[x] pyproject.toml configured</li> <li>[x] README.md for PyPI</li> <li>[x] License file</li> <li>[x] Version management</li> <li>[ ] First PyPI release (when ready)</li> </ul>"},{"location":"developer/project_status/#installation-methods","title":"Installation Methods","text":"<pre><code># From source\ngit clone ...\ncd ipxe\npip install -e .\n\n# From PyPI (future)\npip install elfshoeerator\n\n# With hatch (development)\nhatch env create\nhatch shell\n</code></pre>"},{"location":"developer/project_status/#key-learnings","title":"\ud83d\udca1 Key Learnings","text":"<ol> <li>Modular is better: Easier to understand and maintain</li> <li>Hatch is great: Modern, clean, isolated environments</li> <li>Plugin systems work: Easy extension without core changes</li> <li>Pytest config is powerful: No PYTHONPATH hacks needed</li> <li>Documentation matters: Multiple guides for different audiences</li> </ol>"},{"location":"developer/project_status/#status-summary","title":"\u2728 Status Summary","text":"<p>Current State: Production-ready, well-architected, fully documented</p> <p>Recommended Use: Stable for production use, extensible for customization</p> <p>Next Steps: Use, extend, contribute, or publish to PyPI!</p>"},{"location":"developer/testing/","title":"Testing Guide","text":""},{"location":"developer/testing/#running-tests","title":"Running Tests","text":""},{"location":"developer/testing/#install-test-dependencies","title":"Install Test Dependencies","text":"<pre><code>pip install -e \".[dev]\"\n</code></pre> <p>Or manually:</p> <pre><code>pip install pytest pytest-cov pytest-mock\n</code></pre>"},{"location":"developer/testing/#run-all-tests","title":"Run All Tests","text":"<pre><code># Run all tests\npytest\n\n# Run with verbose output\npytest -v\n\n# Run with coverage report\npytest --cov=src --cov-report=term-missing\n\n# Run specific test file\npytest tests/test_elfshoe.py -v\n\n# Run specific test class\npytest tests/test_menu_generator.py::TestMenuGenerator -v\n\n# Run specific test function\npytest tests/test_menu_generator.py::TestMenuGenerator::test_generate_minimal_menu -v\n</code></pre>"},{"location":"developer/testing/#using-make","title":"Using Make","text":"<pre><code># Run tests\nmake test\n\n# Run tests with coverage\nmake test-coverage\n\n# Run linting\nmake lint\n</code></pre>"},{"location":"developer/testing/#test-structure","title":"Test Structure","text":"<pre><code>tests/\n\u251c\u2500\u2500 conftest.py                 # Shared fixtures and configuration\n\u251c\u2500\u2500 test_elfshoe.py      # Core dataclass tests\n\u251c\u2500\u2500 test_url_validator.py      # URL validation tests\n\u2514\u2500\u2500 test_menu_generator.py     # Menu generation tests\n</code></pre>"},{"location":"developer/testing/#writing-tests","title":"Writing Tests","text":""},{"location":"developer/testing/#example-test","title":"Example Test","text":"<pre><code>import pytest\nfrom elfshoe import BootEntry\n\ndef test_boot_entry_creation():\n    \"\"\"Test creating a boot entry.\"\"\"\n    entry = BootEntry(\n        id='test',\n        label='Test',\n        kernel_url='http://example.com/vmlinuz',\n        initrd_url='http://example.com/initrd.img',\n        boot_params='param=value'\n    )\n    assert entry.id == 'test'\n    assert entry.label == 'Test'\n</code></pre>"},{"location":"developer/testing/#using-fixtures","title":"Using Fixtures","text":"<pre><code>def test_with_config(sample_config):\n    \"\"\"Test uses sample_config fixture from conftest.py.\"\"\"\n    assert 'menu' in sample_config\n    assert sample_config['menu']['title'] == 'Test Menu'\n</code></pre>"},{"location":"developer/testing/#mocking-url-requests","title":"Mocking URL Requests","text":"<pre><code>from unittest.mock import patch, MagicMock\n\n@patch('urllib.request.urlopen')\ndef test_url_check(mock_urlopen):\n    \"\"\"Test URL checking with mocked requests.\"\"\"\n    mock_response = MagicMock()\n    mock_response.status = 200\n    mock_urlopen.return_value = mock_response\n\n    # Your test code here\n</code></pre>"},{"location":"developer/testing/#test-coverage","title":"Test Coverage","text":"<p>Current test coverage:</p> <ul> <li>BootEntry: 100%</li> <li>DistributionMenu: 100%</li> <li>URLValidator: 100%</li> <li>MenuGenerator: 80%</li> <li>Overall: ~25% (initial implementation)</li> </ul> <p>Target coverage: 80%+</p>"},{"location":"developer/testing/#continuous-integration","title":"Continuous Integration","text":"<p>Tests can be run in CI/CD pipelines:</p> <pre><code># Example GitHub Actions\n- name: Run tests\n  run: |\n    pip install -e \".[dev]\"\n    pytest --cov=src --cov-report=xml\n\n- name: Upload coverage\n  uses: codecov/codecov-action@v3\n</code></pre>"},{"location":"developer/testing/#test-categories","title":"Test Categories","text":""},{"location":"developer/testing/#unit-tests","title":"Unit Tests","text":"<ul> <li>Test individual functions and classes</li> <li>Mock external dependencies</li> <li>Fast execution (&lt; 1 second per test)</li> </ul>"},{"location":"developer/testing/#integration-tests","title":"Integration Tests","text":"<ul> <li>Test complete workflows</li> <li>May involve file I/O</li> <li>Medium execution time (&lt; 5 seconds per test)</li> </ul>"},{"location":"developer/testing/#functional-tests","title":"Functional Tests","text":"<ul> <li>End-to-end scenarios</li> <li>Test CLI interface</li> <li>Slower execution (&lt; 10 seconds per test)</li> </ul>"},{"location":"developer/testing/#common-test-patterns","title":"Common Test Patterns","text":""},{"location":"developer/testing/#testing-configuration-loading","title":"Testing Configuration Loading","text":"<pre><code>def test_load_config(temp_dir, sample_config):\n    import yaml\n\n    config_file = temp_dir / 'config.yaml'\n    with open(config_file, 'w') as f:\n        yaml.dump(sample_config, f)\n\n    loaded = load_config(config_file)\n    assert loaded == sample_config\n</code></pre>"},{"location":"developer/testing/#testing-menu-generation","title":"Testing Menu Generation","text":"<pre><code>def test_menu_output(sample_config):\n    generator = MenuGenerator(sample_config)\n    output = generator.generate([])\n\n    assert '#!ipxe' in output\n    assert 'dhcp' in output\n</code></pre>"},{"location":"developer/testing/#testing-url-validation","title":"Testing URL Validation","text":"<pre><code>@patch('urllib.request.urlopen')\ndef test_url_validation(mock_urlopen):\n    mock_response = MagicMock()\n    mock_response.status = 200\n    mock_urlopen.return_value = mock_response\n\n    result = URLValidator.check_url('http://example.com')\n    assert result is True\n</code></pre>"},{"location":"developer/testing/#troubleshooting","title":"Troubleshooting","text":""},{"location":"developer/testing/#import-errors","title":"Import Errors","text":"<p>If you get import errors:</p> <pre><code># Make sure src is in Python path\nexport PYTHONPATH=\"${PYTHONPATH}:${PWD}/src\"\n</code></pre>"},{"location":"developer/testing/#fixture-not-found","title":"Fixture Not Found","text":"<p>Check that <code>conftest.py</code> is in the tests directory and contains the fixture.</p>"},{"location":"developer/testing/#mock-not-working","title":"Mock Not Working","text":"<p>Ensure you're patching the correct import path:</p> <pre><code># Patch where it's used, not where it's defined\n@patch('elfshoe.urllib.request.urlopen')  # \u2713 Correct\n@patch('urllib.request.urlopen')                # \u2717 May not work\n</code></pre>"},{"location":"developer/testing/#best-practices","title":"Best Practices","text":"<ol> <li>One assertion concept per test - Keep tests focused</li> <li>Use descriptive names - <code>test_url_validation_fails_on_404</code> not <code>test_url1</code></li> <li>Use fixtures - Share setup code via conftest.py</li> <li>Mock external calls - Don't make real network requests</li> <li>Test edge cases - Empty inputs, invalid data, etc.</li> <li>Keep tests fast - Use mocking to avoid slow operations</li> <li>Clean up - Use temp_dir fixture for file operations</li> </ol>"},{"location":"developer/testing/#test-configuration","title":"Test Configuration","text":""},{"location":"developer/testing/#pytest-configuration","title":"Pytest Configuration","text":"<p>Tests are configured in <code>pyproject.toml</code>:</p> <pre><code>[tool.pytest.ini_options]\npythonpath = [\"src\"]  # pytest automatically finds the package\ntestpaths = [\"tests\"]\n</code></pre> <p>This means you can run <code>pytest</code> directly without setting <code>PYTHONPATH</code> or installing the package.</p>"},{"location":"developer/testing/#running-tests-multiple-methods","title":"Running Tests (Multiple Methods)","text":""},{"location":"developer/testing/#1-direct-pytest-recommended-for-development","title":"1. Direct pytest (Recommended for Development)","text":"<pre><code># Fastest for development\npytest                    # All tests\npytest -v                 # Verbose\npytest tests/test_menu_generator.py  # Specific file\npytest -k test_validation  # Specific test\n</code></pre>"},{"location":"developer/testing/#2-using-make","title":"2. Using Make","text":"<pre><code>make test                 # All tests (verbose)\nmake test-quick           # Minimal output\nmake test-coverage        # With coverage report\n</code></pre>"},{"location":"developer/testing/#3-using-hatch-recommended-for-ci","title":"3. Using Hatch (Recommended for CI)","text":"<pre><code># Runs in isolated environment\nhatch run test            # All tests\nhatch run test-cov        # With coverage\n</code></pre>"},{"location":"developer/testing/#4-with-editable-install","title":"4. With Editable Install","text":"<pre><code>pip install -e .\npytest                    # Works with installed package\n</code></pre>"},{"location":"developer/testing/#code-coverage","title":"Code Coverage","text":""},{"location":"developer/testing/#generate-coverage-report","title":"Generate Coverage Report","text":"<pre><code># HTML report\npytest --cov=src --cov-report=html\n# Open htmlcov/index.html in browser\n\n# Terminal report\npytest --cov=src --cov-report=term-missing\n\n# Using make\nmake test-coverage\n</code></pre>"},{"location":"developer/testing/#coverage-configuration","title":"Coverage Configuration","text":"<p>In <code>pyproject.toml</code>:</p> <pre><code>[tool.coverage.run]\nsource = [\"src\"]\nomit = [\"*/tests/*\", \"*/test_*.py\"]\n</code></pre>"},{"location":"developer/testing/#code-quality","title":"Code Quality","text":""},{"location":"developer/testing/#linting","title":"Linting","text":"<pre><code># Check style\nmake lint\n\n# Or with hatch\nhatch run lint:check\n\n# Just ruff\nruff check src tests\n\n# Just black\nblack --check src tests\n</code></pre>"},{"location":"developer/testing/#formatting","title":"Formatting","text":"<pre><code># Format code\nmake format\n\n# Or with hatch\nhatch run lint:format\n</code></pre>"},{"location":"developer/testing/#best-practices_1","title":"Best Practices","text":""},{"location":"developer/testing/#writing-tests_1","title":"Writing Tests","text":"<ul> <li>Use pytest fixtures (see <code>tests/conftest.py</code>)</li> <li>Mock external HTTP calls</li> <li>Test edge cases</li> <li>Keep tests focused and small</li> </ul>"},{"location":"developer/testing/#test-organization","title":"Test Organization","text":"<pre><code>tests/\n\u251c\u2500\u2500 conftest.py               # Shared fixtures\n\u251c\u2500\u2500 test_elfshoe.py    # Data model tests\n\u251c\u2500\u2500 test_url_validator.py     # Validation tests\n\u2514\u2500\u2500 test_menu_generator.py    # Generation tests\n</code></pre>"},{"location":"developer/testing/#mocking-example","title":"Mocking Example","text":"<pre><code>from unittest.mock import patch\n\n@patch('urllib.request.urlopen')\ndef test_url_validation(mock_urlopen):\n    mock_response = MagicMock()\n    mock_response.status = 200\n    mock_urlopen.return_value.__enter__.return_value = mock_response\n\n    assert URLValidator.check_url('http://example.com')\n</code></pre>"},{"location":"developer/testing/#cicd-integration","title":"CI/CD Integration","text":""},{"location":"developer/testing/#github-actions-example","title":"GitHub Actions Example","text":"<pre><code>name: Tests\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-python@v4\n        with:\n          python-version: '3.11'\n      - run: pip install hatch\n      - run: hatch run test\n      - run: hatch run lint:check\n</code></pre>"},{"location":"developer/testing/#pre-commit-hooks","title":"Pre-commit Hooks","text":"<pre><code># .pre-commit-config.yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: pytest\n        name: pytest\n        entry: pytest\n        language: system\n        pass_filenames: false\n        always_run: true\n      - id: ruff\n        name: ruff\n        entry: ruff check\n        language: system\n        types: [python]\n      - id: black\n        name: black\n        entry: black --check\n        language: system\n        types: [python]\n</code></pre>"},{"location":"developer/testing/#troubleshooting_1","title":"Troubleshooting","text":""},{"location":"developer/testing/#import-errors_1","title":"Import Errors","text":"<p>If you get import errors:</p> <pre><code># Check pythonpath is in pyproject.toml\ngrep pythonpath pyproject.toml\n\n# Or install in editable mode\npip install -e .\n\n# Or set PYTHONPATH manually\nexport PYTHONPATH=src\npytest\n</code></pre>"},{"location":"developer/testing/#hatch-environment-issues","title":"Hatch Environment Issues","text":"<pre><code># Recreate hatch environment\nhatch env remove default\nhatch env create\n</code></pre>"},{"location":"developer/testing/#coverage-not-working","title":"Coverage Not Working","text":"<pre><code># Install coverage\npip install pytest-cov\n\n# Ensure source is correct\npytest --cov=src --cov-report=term\n</code></pre>"},{"location":"developer/testing/#additional-resources","title":"Additional Resources","text":"<ul> <li>Pytest Documentation</li> <li>Hatch Documentation</li> <li>Coverage.py Documentation</li> <li>Ruff Documentation</li> </ul>"}]}